!function(e){function t(o){if(n[o])return n[o].exports;var a=n[o]={i:o,l:!1,exports:{}};return e[o].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/js/",t(t.s=15)}({15:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(2);$.ajax({url:"https://pingcap.com/api/contributors",crossDomain:!0,success:function(e){window.tidbContributors=e.data,e.data&&($(".j-amount").text(e.data.length),$(".j-show").show())}});var a=function(e){return/^[a-z\d](?:[a-z\d]|-(?=[a-z\d])){0,38}$/i.test(e)},r=function(e){var t=window.tidbContributors.findIndex(function(t){return t.login.toLowerCase()===e.toLowerCase()});if(t>-1){var n=window.tidbContributors[t];Object(o.b)("CONTRIBUTIONS_RANK",t+1),Object(o.b)("DATE",n.date),Object(o.b)("CONTRIBUTIONS",n.contributions),Object(o.b)("AVATAR",n.avatar_url)}else console.log("Welcome to the TiDB planet, join us now! www.pingcap.com")},i=function(){return!Object(o.a)().FIRST_ACCESS},c=function(){$(".input-container .inner").removeClass("error"),$(".input-container .inner").remove(),$(".form__input").val(null)},s=function(){$(".j-login-overlay").fadeIn(),$(".j-login-overlay, .modal").addClass("active")},l=function(){$(".j-login-overlay").fadeOut(),$(".j-login-overlay, .modal").removeClass("active"),c()},u=function(){$(".j-video-overlay").fadeIn(),$(".j-video-overlay, .modal").addClass("active");var e=document.querySelector("video").play();void 0!==e&&e.catch(function(e){console.log("Auto-play was prevented by browser")}).then(function(){}),m()},d=function(){$(".j-video-overlay").fadeOut(),$(".j-video-overlay, .modal").removeClass("active")},p=function(){function e(e,t){return Math.floor(Math.random()*(e-t+1)*10+t)}for(var t=document.getElementById("meteors"),n=document.getElementsByClassName("meteor"),o=0;o<2;o++){var a=document.createElement("div");a.className="meteor",a.style.top=e(60,-30)+"px",a.style.left=e(150,20)+"px",t.appendChild(a)}for(var r=0,i=n.length;r<i;r++)n[r].style.animationDelay=r%6==0?"0s":.8*r+"s"},f=function(e){var t='  <div class="list__item">    <div class="github-avatar">      <img src="'.concat(e.avatar_url,'" width="36px" height="36px"/>    </div>    <div class="contributor-info">      <div class="contributor-name"><a href="https://github.com/').concat(e.login,'" target="_blank">').concat(e.login,'</a></div>      <div class="contribution-degree" data-degree="').concat(function(e){return e>=0&&e<=5?1:e>=6&&e<=10?2:e>=11&&e<=20?3:4}(e.contributions),'">        <span class="dot dot-1"></span>        <span class="dot dot-2"></span>        <span class="dot dot-3"></span>        <span class="dot dot-4"></span>      </div>    </div>  </div> ');$("#contributors").append(t)},v=function(e){var t=window.tidbContributors;t.sort(function(e,t){var n=e.login.toUpperCase(),o=t.login.toUpperCase();return n<o?-1:n>o?1:0});var n=_.floor(t.length/5),o=[];t.forEach(function(t,a){e<4?a>=e*n&&a<(e+1)*n&&o.push(t):a>=e*n&&o.push(t)}),o.forEach(function(e){f(e)})},m=function(){document.addEventListener("WeixinJSBridgeReady",function(){$("#video")[0].play()})},g=function(){var e=$(".modal-overlay.active").data("type");$(".modal-overlay").fadeOut(),$(".modal-overlay, .modal").removeClass("active"),"login"===e&&c(),"video"===e&&$("#video")[0].pause(),"contributors"===e&&$("#contributors").html(""),"capture"===e&&$(".html2image-container").removeClass("show")};$(function(){$("body").hasClass("welcome-page")&&!i()&&$("body").append('<div class="guide-again scale-in-center">Click these elements and explore the planet again!</div>'),Object(o.a)().USERNAME||($(".j-login").show(),$("body").hasClass("welcome-page")&&i()&&(Object(o.b)("FIRST_ACCESS","-1"),$("body").append('<div class="mask j-mask"></div>'))),$("body").hasClass("milestones-page")&&u(),$(".nav").fadeIn(),$("body")[0].offsetWidth>768?$(".j-forward").addClass("animation-forward_arrow"):$(".j-login").css("display","none"),setTimeout(function(){$(".j-fadeOutSlowly").fadeOut("slow")},5e3),$("#video").on("ended",function(){console.log("Video has ended!"),d()}),$(".close-modal").off("click").on("click",function(e){g(),e.preventDefault(),e.stopPropagation()}),$(".modal-overlay").on("click",function(e){$(this).hasClass("active")&&_.isEqual(e.target,e.delegateTarget)&&g()}),$(".j-login").on("click",function(e){s(),e.preventDefault(),e.stopPropagation()}),$(".j-later").on("click",function(e){l(),e.preventDefault(),e.stopPropagation()}),$(".j-open-dorm").off("click").on("click",function(e){var t=$(this).data("index");v(t),$(".j-contributors-overlay").fadeIn(),$(".j-contributors-overlay, .modal").addClass("active"),e.preventDefault(),e.stopPropagation()}),$(".j-video-btn").on("click",function(e){u(),e.preventDefault(),e.stopPropagation()}),$(".j-popup").on("click",function(e){$(".popup").fadeOut(),e.preventDefault(),e.stopPropagation()}),$(".j-open-popup").on("click",function(e){$(".popup").fadeIn(),e.preventDefault(),e.stopPropagation()}),$(".j-readmore").on("click",function(e){"zh"==navigator.language.substring(0,2)&&$(this).attr("href","https://pingcap.com/docs-cn/releases/3.0beta/"),window.open($(this).attr("href")),e.preventDefault(),e.stopPropagation()}),$(".form__input").blur(function(){a($(this).val())||$(".error").length||($(".input-container").append('<span class="inner" >Please enter a valid username.</span>'),setTimeout(function(){$(".input-container .inner").addClass("error")},100))}),$(".form__input").focus(function(){$(".input-container .inner").removeClass("error"),$(".input-container .inner").remove()}),$(".form").submit(function(e){$(".form__input").blur();var t=$(".form__input").val();a(t)&&($(".modal-login").addClass("landing"),r(t),Object(o.b)("USERNAME",t),setTimeout(function(){location.href="/tidb-planet/user/"},2e3)),e.preventDefault()}),p()})},2:function(e,t,n){"use strict";n.d(t,"a",function(){return c}),n.d(t,"b",function(){return s});var o=n(3),a=n.n(o),r="_tidb_planet_",i={CONTRIBUTIONS_RANK:"".concat(r,"contributions_rank"),USERNAME:"".concat(r,"username"),DATE:"".concat(r,"date"),AVATAR:"".concat(r,"avatar_url"),CONTRIBUTIONS:"".concat(r,"contributions"),FIRST_ACCESS:"".concat(r,"first_access")},c=function(){var e={};for(var t in i){var n=a.a.get(i[t]);e[t]=n}return e},s=function(e,t){a.a.set(i[e],t)}},3:function(e,t,n){function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var a,r;!function(i){var c=!1;if(a=i,void 0!==(r="function"==typeof a?a.call(t,n,t,e):a)&&(e.exports=r),c=!0,"object"===o(t)&&(e.exports=i(),c=!0),!c){var s=window.Cookies,l=window.Cookies=i();l.noConflict=function(){return window.Cookies=s,l}}}(function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var o in n)t[o]=n[o]}return t}function t(n){function o(t,a,r){var i;if("undefined"!=typeof document){if(arguments.length>1){if(r=e({path:"/"},o.defaults,r),"number"==typeof r.expires){var c=new Date;c.setMilliseconds(c.getMilliseconds()+864e5*r.expires),r.expires=c}r.expires=r.expires?r.expires.toUTCString():"";try{i=JSON.stringify(a),/^[\{\[]/.test(i)&&(a=i)}catch(e){}a=n.write?n.write(a,t):encodeURIComponent(String(a)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)),t=t.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),t=t.replace(/[\(\)]/g,escape);var s="";for(var l in r)r[l]&&(s+="; "+l,!0!==r[l]&&(s+="="+r[l]));return document.cookie=t+"="+a+s}t||(i={});for(var u=document.cookie?document.cookie.split("; "):[],d=/(%[0-9A-Z]{2})+/g,p=0;p<u.length;p++){var f=u[p].split("="),v=f.slice(1).join("=");this.json||'"'!==v.charAt(0)||(v=v.slice(1,-1));try{var m=f[0].replace(d,decodeURIComponent);if(v=n.read?n.read(v,m):n(v,m)||v.replace(d,decodeURIComponent),this.json)try{v=JSON.parse(v)}catch(e){}if(t===m){i=v;break}t||(i[m]=v)}catch(e){}}return i}}return o.set=o,o.get=function(e){return o.call(o,e)},o.getJSON=function(){return o.apply({json:!0},[].slice.call(arguments))},o.defaults={},o.remove=function(t,n){o(t,"",e(n,{expires:-1}))},o.withConverter=t,o}return t(function(){})})}});