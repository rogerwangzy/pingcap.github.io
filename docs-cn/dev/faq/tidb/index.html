<!DOCTYPE html>
<html lang="en">
<head>
<meta name="robots" content="noindex">
<meta charset="utf-8"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" name="viewport"/>
<script>
window.ga =
    window.ga ||
    function() {
        ;(ga.q = ga.q || []).push(arguments)
    }
ga.l = +new Date()
ga('create', 'UA-99991864-4', 'auto')
ga('send', 'pageview')
</script>
<script async="" src="https://download.pingcap.com/js/ga-analytics.js"></script>
<style media="screen" type="text/css">
        .st_tree {
            display: none;
        }
    </style>
<link href="https://download.pingcap.com/style/github-markdown.css" rel="stylesheet"/>
<link href="/css/doc.css" rel="stylesheet"/>
<title>TiDB FAQ | TiDB 官方用户文档</title><link href="/images/favicon.ico" rel="icon" type="image/x-icon"/>
<link href="/images/favicon.ico" rel="shortcut icon" type="image/x-icon"/>
<link href="/images/apple-touch-icon.png" rel="apple-touch-icon"/>
<meta content="TiDB 是由 PingCAP 研发的一款定位于在线事务处理/在线分析处理（HTAP）的开源融合型数据库产品，实现了一键水平伸缩，强一致性的多副本数据安全，分布式事务，实时 OLAP 等重要特性，目前已广泛应用于金融服务、互联网、制造等行业。" name="description"/>
<meta content="noodp" name="robots"/>
<meta content="TiDB, MySQL, HTAP, Open Source, Cloud-Native, NewSQL, Aurora Alternative" name="keywords"/>
<meta content="en_US" property="og:locale"/>
<meta content="website" property="og:type"/>
<meta content="TiDB FAQ | TiDB 官方用户文档" property="og:title"/>
<meta content="TiDB 是由 PingCAP 研发的一款定位于在线事务处理/在线分析处理（HTAP）的开源融合型数据库产品，实现了一键水平伸缩，强一致性的多副本数据安全，分布式事务，实时 OLAP 等重要特性，目前已广泛应用于金融服务、互联网、制造等行业。" property="og:description"/>
<meta content="https://pingcap.com/docs-cn/dev/faq/tidb/" property="og:url"/>
<meta content="MySQL at Scale. No more manual sharding" property="og:site_name"/>
<meta content="https://pingcap.com/images/pingcap-opengraph.jpg" property="og:image"/>
<meta content="https://pingcap.com/images/pingcap-opengraph.jpg" property="og:image:secure_url"/><meta content="summary" name="twitter:card"/><meta content="TiDB 是由 PingCAP 研发的一款定位于在线事务处理/在线分析处理（HTAP）的开源融合型数据库产品，实现了一键水平伸缩，强一致性的多副本数据安全，分布式事务，实时 OLAP 等重要特性，目前已广泛应用于金融服务、互联网、制造等行业。" name="twitter:description"/>
<meta content="TiDB FAQ | TiDB 官方用户文档" name="twitter:title"/>
<meta content="@pingcap" name="twitter:site"/>
<meta content="https://pingcap.com/images/pingcap-opengraph.jpg" name="twitter:image"/>
<meta content="@pingcap" name="twitter:creator"/>
<script type="application/ld+json">
{
    "@context": "http:\/\/schema.org",
    "@type": "WebSite",
    "url": "https:\/\/pingcap.com\/",
    "name": "PingCAP",
    "potentialAction": {
        "@type": "SearchAction",
        "target": "https:\/\/pingcap.com\/?s={search_term_string}",
        "query-input": "required name=search_term_string"
    }
}
</script>
<script>
    (function(){
        var bp = document.createElement('script');
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>
<link as="font" crossorigin="anonymous" href="https://download.pingcap.com/fonts/lato/lato-regular-webfont.woff2" rel="preload" type="font/woff2"/>
<link as="font" crossorigin="anonymous" href="https://download.pingcap.com/fonts/lato/lato-regular-webfont.woff" rel="preload" type="font/woff"/>
<link as="font" crossorigin="anonymous" href="https://download.pingcap.com/fonts/lato/lato-regular-webfont.ttf" rel="preload" type="font/ttf"/>
<link as="font" crossorigin="anonymous" href="https://download.pingcap.com/fonts/titilliumweb/titilliumweb-regular-webfont.woff2" rel="preload" type="font/woff2"/>
<link as="font" crossorigin="anonymous" href="https://download.pingcap.com/fonts/titilliumweb/titilliumweb-regular-webfont.woff" rel="preload" type="font/woff"/>
<link as="font" crossorigin="anonymous" href="https://download.pingcap.com/fonts/titilliumweb/titilliumweb-regular-webfont.ttf" rel="preload" type="font/ttf"/>
<link as="script" href="https://download.pingcap.com/js/jquery.min.js" rel="preload"/>
<link href="/css/main.css" rel="stylesheet"/>
<link href="https://download.pingcap.com/style/docsearch.min.css" rel="stylesheet"/>
<script type="text/javascript">
var trackOutboundLink = function(url) {
  var redirectTriggered = false
  ga('send', 'event', 'outbound', 'click', url, {
    hitCallback: function() {
      redirectTriggered = true
      document.location = url
    }
  })
  setTimeout(function() {
    if (!redirectTriggered) {
      document.location = url
    }
  }, 1500)
}

var trackViews = function(btn_type, event_category) {
  var event_label = btn_type
  var eventCategory = event_category
  ga('send', 'event', {
    'eventCategory': eventCategory,
    'eventAction': 'click',
    'eventLabel': event_label
  });
}
</script>
<script type="text/javascript">"/"===location.pathname&&"pingcap.github.io"===location.hostname&&(location.href="/en/")</script>
<link as="script" href="/js/app.js" rel="preload"/>
<link rel="canonical" href="https://pingcap.com/docs-cn/stable/faq/tidb" /></head>
<body data-lang="cn">
<div id="page-content">
<header class="fixed-top" role="navigation">
<div class="container">
<a class="nav-brand" href="/index.html"><img alt="PingCAP" src="/images/pingcap-logo.png"/></a>
<div class="nav-wrapper">
<div class="navigation">
<ul>
<li><a class="nav-blinking" href="https://university.pingcap.com/" onclick="trackViews('navbar-university', 'pingcap-university_view')" target="_blank">PingCAP
                        University</a></li>
<li class="sel"><a href="/docs-cn/stable/" onclick="trackViews('navbar-docs', 'docs-cn_view')">文档</a></li>
<li><a href="/cases-cn">案例</a></li>
<li><a href="/community-cn">社区</a></li>
<li><a href="/blog-cn">博客</a></li>
<li><a href="/about-cn">关于</a></li>
<li><a href="https://asktug.com" onclick="trackViews('navbar-asktug', 'asktug_view')" target="_blank">问答</a></li>
<li><a class="link-download" href="mailto:info@pingcap.com" onclick="trackViews('navbar-contact-us', 'mail_to_info_view')" target="_blank">联系我们</a></li>
</ul>
</div>
<div class="global-search">
<form action="/search/docs-cn/dev/" class="search-wrapper">
<span class="icon-search"><svg fill="#fff" height="18" viewbox="0 0 67.125 67.125" width="18" xmlns="http://www.w3.org/2000/svg"><path d="M23.902 0C11.01 0 .523 10.488.523 23.38c0 12.891 10.487 23.379 23.379 23.379a23.258 23.258 0 0 0 14.471-5.037l24.816 24.817c.391.391.902.586 1.414.586s1.023-.195 1.414-.586a2 2 0 0 0 0-2.828L41.293 38.985c3.721-4.142 5.989-9.613 5.989-15.605C47.282 10.488 36.794 0 23.902 0zM4.523 23.38C4.523 12.694 13.216 4 23.902 4c10.687 0 19.38 8.694 19.38 19.38 0 5.396-2.221 10.279-5.791 13.795a1.959 1.959 0 0 0-.488.349 2.003 2.003 0 0 0-.271.343C33.31 40.9 28.825 42.76 23.903 42.76c-10.686-.001-19.38-8.695-19.38-19.38z"></path><path d="M24.075 8.591c-8.25 0-14.962 6.712-14.962 14.962a2 2 0 0 0 4 0c0-6.044 4.918-10.962 10.962-10.962a2 2 0 0 0 0-4z"></path></svg></span>
<input data-lang="cn" id="search-input" name="q" placeholder="搜索 TiDB 文档" type="search"/>
</form>
</div>
</div>
<div class="nav-btn nav-slider">
<i class="material-icons"><svg height="16" viewbox="0 0 459 459" width="16" xmlns="http://www.w3.org/2000/svg"><path d="M0 382.5h459v-51H0v51zM0 255h459v-51H0v51zM0 76.5v51h459v-51H0z" fill="#FFF"></path></svg></i>
</div>
</div>
</header>
<nav class="mobile-sidebar">
<div class="nav-header">
<div class="logo-wrap">
<a class="nav-brand" href="/en"><img alt="PingCAP" src="/images/pingcap-logo.png"/></a>
</div>
</div>
<ul class="ul-base">
<li class="sel"><a href="/docs-cn/stable/">文档</a></li>
<li><a href="/cases-cn">案例</a></li>
<li><a href="/community-cn">社区</a></li>
<li><a href="/blog-cn">博客</a></li>
<li><a href="/about-cn">关于</a></li>
<li><a href="https://asktug.com" onclick="trackViews('navbar-asktug', 'asktug_view')" target="_blank">问答</a></li>
<li><a class="link-download" href="mailto:info@pingcap.com" onclick="trackViews('navbar-contact-us', 'mail_to_info_view')" target="_blank">联系我们</a></li>
<li><a class="nav-blinking" href="https://university.pingcap.com/" onclick="trackViews('navbar-university', 'pingcap-university_view')" target="_blank">PingCAP University</a></li>
</ul>
<div class="nav-footer">
<div class="contact-list-wrap">
<div class="flex-list">
<h4 class="list-title"><strong>Contact</strong></h4>
<ul class="social social-cn ul-base">
<li><a class="twitter" href="https://twitter.com/PingCAP" target="_blank"><svg height="18" viewbox="0 0 612 612" width="18" xmlns="http://www.w3.org/2000/svg"><path d="M612 116.258a250.714 250.714 0 0 1-72.088 19.772c25.929-15.527 45.777-40.155 55.184-69.411-24.322 14.379-51.169 24.82-79.775 30.48-22.907-24.437-55.49-39.658-91.63-39.658-69.334 0-125.551 56.217-125.551 125.513 0 9.828 1.109 19.427 3.251 28.606-104.326-5.24-196.835-55.223-258.75-131.174-10.823 18.51-16.98 40.078-16.98 63.101 0 43.559 22.181 81.993 55.835 104.479a125.556 125.556 0 0 1-56.867-15.756v1.568c0 60.806 43.291 111.554 100.693 123.104-10.517 2.83-21.607 4.398-33.08 4.398-8.107 0-15.947-.803-23.634-2.333 15.985 49.907 62.336 86.199 117.253 87.194-42.947 33.654-97.099 53.655-155.916 53.655-10.134 0-20.116-.612-29.944-1.721 55.567 35.681 121.536 56.485 192.438 56.485 230.948 0 357.188-191.291 357.188-357.188l-.421-16.253c24.666-17.593 46.005-39.697 62.794-64.861z"></path></svg></a></li>
<li><a class="linkedin" href="https://www.linkedin.com/company/pingcap/" target="_blank"><svg height="18" viewbox="0 0 438.536 438.535" width="18" xmlns="http://www.w3.org/2000/svg"><path d="M5.424 145.895H99.64v282.932H5.424zM408.842 171.739c-19.791-21.604-45.967-32.408-78.512-32.408-11.991 0-22.891 1.475-32.695 4.427-9.801 2.95-18.079 7.089-24.838 12.419-6.755 5.33-12.135 10.278-16.129 14.844-3.798 4.337-7.512 9.389-11.136 15.104v-40.232h-93.935l.288 13.706c.193 9.139.288 37.307.288 84.508 0 47.205-.19 108.777-.572 184.722h93.931V270.942c0-9.705 1.041-17.412 3.139-23.127 4-9.712 10.037-17.843 18.131-24.407 8.093-6.572 18.13-9.855 30.125-9.855 16.364 0 28.407 5.662 36.117 16.987 7.707 11.324 11.561 26.98 11.561 46.966V428.82h93.931V266.664c-.007-41.688-9.897-73.328-29.694-94.925zM53.103 9.708c-15.796 0-28.595 4.619-38.4 13.848C4.899 32.787 0 44.441 0 58.529 0 72.42 4.758 84.034 14.275 93.358c9.514 9.325 22.078 13.99 37.685 13.99h.571c15.99 0 28.887-4.661 38.688-13.99 9.801-9.324 14.606-20.934 14.417-34.829-.19-14.087-5.047-25.742-14.561-34.973C81.562 14.323 68.9 9.708 53.103 9.708z"></path></svg></a></li>
<li><a class="reddit" href="https://www.reddit.com/r/TiDB/" target="_blank"><svg height="18" viewbox="0 0 279.748 279.748" width="18" xmlns="http://www.w3.org/2000/svg"><path d="M279.748 133.142c0-19.299-15.701-35-35-35-10.768 0-20.674 4.812-27.279 13.064-18.532-8.431-39.663-13.626-62.015-15.271l19.206-60.692 42.895 9.294c3.285 12.782 14.901 22.258 28.693 22.258 16.336 0 29.627-13.29 29.627-29.626 0-16.336-13.291-29.627-29.627-29.627-11.801 0-21.999 6.941-26.759 16.95l-49.497-10.725a10.002 10.002 0 0 0-11.651 6.756L134.636 95.43c-26.164.638-50.988 6.053-72.356 15.775-6.606-8.251-16.512-13.063-27.28-13.063-19.299 0-35 15.701-35 35 0 9.373 3.683 18.173 10.222 24.709-3.9 8.37-5.875 17.076-5.875 25.936 0 24.048 14.396 46.492 40.538 63.199 25.447 16.264 59.183 25.221 94.989 25.221 35.808 0 69.542-8.957 94.989-25.221 26.142-16.707 40.538-39.151 40.538-63.199 0-8.859-1.975-17.565-5.875-25.936 6.539-6.537 10.222-15.336 10.222-24.709zM15.369 145.139c-2.212-3.59-3.369-7.688-3.369-11.997 0-12.682 10.317-23 23-23 5.444 0 10.558 1.851 14.649 5.258-14.622 8.302-26.132 18.289-34.28 29.739zm52.671 20.266c0-13.785 11.215-25 25-25s25 11.215 25 25-11.215 25-25 25-25-11.215-25-25zm123.119 57.054c-9.745 10.637-29.396 17.244-51.285 17.244-21.888 0-41.539-6.607-51.284-17.244a9.937 9.937 0 0 1-2.617-7.192 9.933 9.933 0 0 1 3.235-6.937 9.974 9.974 0 0 1 6.754-2.627c2.797 0 5.484 1.183 7.373 3.244 5.803 6.333 20.827 10.756 36.539 10.756s30.737-4.423 36.539-10.756a10.022 10.022 0 0 1 7.374-3.244c2.508 0 4.906.933 6.755 2.627a9.928 9.928 0 0 1 3.234 6.937 9.933 9.933 0 0 1-2.617 7.192zm-4.451-32.054c-13.785 0-25-11.215-25-25s11.215-25 25-25 25 11.215 25 25-11.215 25-25 25zm77.671-45.266c-8.147-11.45-19.657-21.436-34.28-29.739 4.092-3.408 9.205-5.258 14.649-5.258 12.683 0 23 10.318 23 23 0 4.309-1.157 8.407-3.369 11.997z"></path></svg></a></li>
<li><a class="google-plus" href="https://groups.google.com/forum/#!forum/tidb-user" target="_blank"><svg height="18" viewbox="0 0 491.858 491.858" width="18" xmlns="http://www.w3.org/2000/svg"><path d="M377.472 224.957H201.319v58.718H308.79c-16.032 51.048-63.714 88.077-120.055 88.077-69.492 0-125.823-56.335-125.823-125.824 0-69.492 56.333-125.823 125.823-125.823 34.994 0 66.645 14.289 89.452 37.346l42.622-46.328c-34.04-33.355-80.65-53.929-132.074-53.929C84.5 57.193 0 141.693 0 245.928s84.5 188.737 188.736 188.737c91.307 0 171.248-64.844 188.737-150.989v-58.718l-.001-.001zM491.858 224.857h-36.031v-36.031h-30.886v36.031H388.91v30.883h36.031v36.032h30.886V255.74h36.031z"></path></svg></a></li>
<li><a class="stack-overflow" href="https://stackoverflow.com/questions/tagged/tidb" target="_blank"><svg height="18" viewbox="0 0 547.597 547.597" width="18" xmlns="http://www.w3.org/2000/svg"><path d="M140.81 475.111h.024l189.91-.269c8.434-.013 15.3-6.886 15.3-15.318v-21.298c0-8.428-6.854-15.288-15.3-15.288l-189.91.264c-8.433.012-15.3 6.885-15.3 15.318v21.31c.001 8.427 6.855 15.281 15.276 15.281z"></path><path d="M58.667 517.854c.073 29.26.073 29.449 3.072 29.449h.055l10.612.294h.086s85.814 0 171.629-.036c42.914-.019 85.821-.05 118-.092 16.09-.019 29.505-.043 38.887-.074 17.803-.055 17.803-.055 17.803-3.072l.3-10.697V333.299c0-8.434-6.866-15.3-15.3-15.3h-11.909c-8.434 0-15.3 6.866-15.3 15.3V496.22c0 5.062-4.119 9.18-9.181 9.18H110.51c-5.061 0-9.18-4.118-9.18-9.18V333.299c0-8.434-6.867-15.3-15.3-15.3H73.82c-8.433 0-15.3 6.86-15.3 15.3 0 23.342.012 76.084.055 122.981.019 23.447.05 45.442.092 61.574z"></path><path d="M142.322 397.399l189.402 17.467c.478.043.948.062 1.413.062 7.956 0 14.468-5.985 15.159-13.917l1.83-21.096c.729-8.396-5.508-15.851-13.898-16.628l-189.102-17.461c-8.593-.795-15.869 5.441-16.653 13.825l-1.97 21.108a15.172 15.172 0 0 0 3.452 11.181 15.19 15.19 0 0 0 10.367 5.459zM437.636 208.849a15.253 15.253 0 0 0 17.694 12.443l21.065-3.678c8.311-1.451 13.898-9.395 12.454-17.706l-32.504-187.23c-1.42-8.207-9.21-13.917-17.692-12.448l-21.065 3.678c-8.311 1.451-13.898 9.395-12.454 17.705l32.502 187.236zM190.333 194.375l163.6 96.708a15.28 15.28 0 0 0 7.778 2.136c5.393 0 10.447-2.876 13.183-7.509l10.876-18.36c2.08-3.519 2.674-7.631 1.658-11.591a15.18 15.18 0 0 0-7.032-9.358l-163.6-96.714c-7.014-4.149-16.836-1.597-20.967 5.374l-10.869 18.36a15.2 15.2 0 0 0-1.658 11.591 15.21 15.21 0 0 0 7.031 9.363zM387.525 240.501a15.276 15.276 0 0 0 12.626 6.659c3.091 0 6.077-.924 8.635-2.681l17.405-11.934c6.953-4.768 8.752-14.314 4.015-21.292L323.29 54.104c-4.584-6.732-14.498-8.623-21.236-3.984l-17.737 12.21c-6.945 4.779-8.727 14.327-3.971 21.291l107.179 156.88zM154.482 302.319l183.465 49.156c1.298.349 2.632.526 3.966.526 6.903 0 12.98-4.67 14.762-11.347l5.508-20.624c2.179-8.152-2.681-16.555-10.826-18.74l-183.465-49.162c-8.017-2.148-16.604 2.852-18.728 10.826l-5.508 20.63c-2.179 8.142 2.68 16.551 10.826 18.735z"></path></svg></a></li>
<li id="wechat-mobile"><a class="wechat" href="javascript:void(0)"><svg height="18" viewbox="0 0 31.403 31.404" width="18" xmlns="http://www.w3.org/2000/svg"><path d="M31.403 21.306c0-4.597-4.388-8.32-9.8-8.32-5.414 0-9.802 3.725-9.802 8.32 0 4.597 4.388 8.322 9.802 8.322 1.701 0 3.302-.369 4.697-1.019l3.863 1.671-.447-4.309c1.066-1.329 1.687-2.937 1.687-4.665zm-13.102-2.254a1.395 1.395 0 1 1 0-2.79 1.395 1.395 0 0 1 0 2.79zm6.604 0a1.395 1.395 0 1 1 .003-2.79 1.395 1.395 0 0 1-.003 2.79z"></path><path d="M21.604 11.885c1.515 0 2.957.27 4.271.755.009-.175.03-.345.03-.521 0-6.074-5.801-10.996-12.953-10.996C5.799 1.123 0 6.044 0 12.119c0 2.284.822 4.408 2.229 6.167l-.591 5.694 5.104-2.213c1.264.59 2.661.986 4.136 1.189a8.143 8.143 0 0 1-.179-1.65c.001-5.195 4.892-9.421 10.905-9.421zm-4.287-6.428a1.84 1.84 0 1 1-1.841 1.84c0-1.016.825-1.84 1.841-1.84zM8.586 9.139a1.84 1.84 0 0 1 0-3.682 1.84 1.84 0 1 1 0 3.682z"></path></svg></a><div class="qr_code_outer f-hide f-tc">
<div class="qr_code">
<i id="close_qrcode"><svg viewbox="0 0 224.512 224.512" xmlns="http://www.w3.org/2000/svg"><path d="M224.507 6.997L217.521 0 112.256 105.258 6.998 0 .005 6.997l105.258 105.257L.005 217.512l6.993 7L112.256 119.24l105.265 105.272 6.986-7-105.258-105.258z" fill="#010002"></path></svg></i>
<img alt="Wechat qrCode" class="qr_code_img" id="js_qr_code_img" src="/images/wechat-qrcode.jpg"/>
<p>微信扫一扫<br/> 微信ID：pingcap2015</p>
</div>
</div>
</li>
</ul>
</div>
<div class="subscribe" id="subscribe-mobile"></div>
</div>
<div class="container">
<a class="btn-lang" href="/docs/" id="lang">English</a>
</div>
</div>
</nav>
<div class="doc">
<div class="container">
<div class="sidebar">
<div class="sticky-sidebar docs-sticky-sidebar">
<div class="title"> 文档 </div>
<div class="version-switcher">
<button id="dropdownMenuButton" type="button">dev</button>
<div class="dropdown-menu visibility-hide" id="dropdown-menu-items">
<a class="dropdown-item " href="
                /docs-cn/stable/faq/tidb/">v3.0 (stable)</a>
<a class="dropdown-item " href="
                /docs-cn/dev/faq/tidb/">dev</a>
<a class="dropdown-item " href="
                /docs-cn/v3.1/faq/tidb/">v3.1-beta</a>
<a class="dropdown-item " href="
                /docs-cn/v2.1/faq/tidb/">v2.1</a></div>
</div>
<div class="st_tree nav-toc docs-nav-toc"><ul><li class="has-child"><a href="#">
<span>关于 TiDB</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs-cn/dev/overview/">
<span>TiDB 简介</span>
</a>
</li><li class="has-child"><a href="#">
<span>Benchmark 测试</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs-cn/dev/benchmark/how-to-run-sysbench/">
<span>如何用 Sysbench 测试 TiDB</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/benchmark/how-to-run-tpcc/">
<span>如何对 TiDB 进行 TPC-C 测试</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/benchmark/sysbench-v4/">
<span>Sysbench 性能对比 - v3.0 对比 v2.1</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/benchmark/tpcc/">
<span>TPC-C 性能对比 - v3.0 对比 v2.1</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/benchmark/add-index-with-load/">
<span class="has-code">线上负载与 `Add Index` 相互影响测试</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/benchmark/sysbench-in-k8s/">
<span>TiDB in Kubernetes Sysbench 性能测试</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/benchmark/dm-v1.0-ga/">
<span>DM 1.0-GA 性能测试</span>
</a>
</li></ul>
</li></ul>
</li><li class="has-child"><a href="#">
<span>主要概念</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs-cn/dev/architecture/">
<span>整体架构</span>
</a>
</li><li class="has-child"><a href="#">
<span>核心特性</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs-cn/dev/key-features/#%e6%b0%b4%e5%b9%b3%e6%89%a9%e5%b1%95">
<span>水平扩展</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/key-features/#%e9%ab%98%e5%8f%af%e7%94%a8">
<span>高可用</span>
</a>
</li></ul>
</li></ul>
</li><li class="has-child"><a href="#">
<span>操作指南</span>
<i class="icon-arrow"></i></a><ul><li class="has-child"><a href="#">
<span>快速上手</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs-cn/dev/how-to/get-started/deploy-tidb-from-docker-compose/">
<span>使用 Docker Compose 部署 TiDB</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/how-to/get-started/explore-sql/">
<span>SQL 基本操作</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/how-to/get-started/read-historical-data/">
<span>读取历史数据</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/how-to/get-started/tidb-binlog/">
<span>TiDB Binlog 教程</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/how-to/get-started/data-migration/">
<span>TiDB Data Migration 教程</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/how-to/get-started/tidb-lightning/">
<span>TiDB Lightning 教程</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/how-to/get-started/tispark/">
<span>TiSpark 教程</span>
</a>
</li></ul>
</li><li class="has-child"><a href="#">
<span>部署</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs-cn/dev/how-to/deploy/hardware-recommendations/">
<span>软硬件环境需求</span>
</a>
</li><li class="has-child"><a href="#">
<span>集群部署方式</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs-cn/dev/how-to/deploy/orchestrated/ansible/">
<span>使用 Ansible 部署（推荐）</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/how-to/deploy/orchestrated/offline-ansible/">
<span>使用 Ansible 离线部署</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/how-to/deploy/orchestrated/docker/">
<span>使用 Docker 部署</span>
</a>
</li></ul>
</li><li class="has-child"><a href="#">
<span>跨地域冗余</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs-cn/dev/how-to/deploy/geographic-redundancy/overview/">
<span>跨数据中心部署方案</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/how-to/deploy/geographic-redundancy/location-awareness/">
<span>配置集群拓扑</span>
</a>
</li></ul>
</li><li class="leaf-child">
<a href="/docs-cn/dev/how-to/deploy/data-migration-with-ansible/">
<span>使用 Ansible 部署 DM 集群</span>
</a>
</li></ul>
</li><li class="has-child"><a href="#">
<span>配置</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs-cn/dev/how-to/configure/time-zone/">
<span>时区</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/how-to/configure/memory-control/">
<span>内存控制</span>
</a>
</li></ul>
</li><li class="has-child"><a href="#">
<span>安全</span>
<i class="icon-arrow"></i></a><ul><li class="has-child"><a href="#">
<span>安全传输层协议 (TLS)</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs-cn/dev/how-to/secure/enable-tls-clients/">
<span>为 MySQL 客户端开启 TLS</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/how-to/secure/enable-tls-between-components/">
<span>为 TiDB 组件间开启 TLS</span>
</a>
</li></ul>
</li><li class="leaf-child">
<a href="/docs-cn/dev/how-to/secure/generate-self-signed-certificates/">
<span>生成自签名证书</span>
</a>
</li></ul>
</li><li class="has-child"><a href="#">
<span>监控</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs-cn/dev/how-to/monitor/overview/">
<span>概述</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/how-to/monitor/monitor-a-cluster/">
<span>监控 TiDB 集群</span>
</a>
</li></ul>
</li><li class="has-child"><a href="#">
<span>迁移</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs-cn/dev/reference/tools/user-guide/">
<span>迁移工具使用指南</span>
</a>
</li><li class="has-child"><a href="#">
<span>从 MySQL 迁移</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs-cn/dev/how-to/migrate/from-mysql-aurora/">
<span>以 Amazon Aurora MySQL 为例</span>
</a>
</li></ul>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/tools/tidb-lightning/csv/">
<span>从 CSV 迁移</span>
</a>
</li></ul>
</li><li class="has-child"><a href="#">
<span>运维</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs-cn/dev/how-to/maintain/ansible-operations/">
<span>Ansible 常见运维操作</span>
</a>
</li><li class="has-child"><a href="#">
<span>备份与恢复</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs-cn/dev/how-to/maintain/backup-and-restore/mydumper-lightning/">
<span>使用 Mydumper/TiDB Lightning 进行备份与恢复</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/tools/br/br/">
<span>使用 BR 进行备份与恢复</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/tools/br/use-cases/">
<span>BR 备份与恢复场景示例</span>
</a>
</li></ul>
</li><li class="has-child"><a href="#">
<span>定位异常查询</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs-cn/dev/how-to/maintain/identify-abnormal-queries/identify-slow-queries/">
<span>定位慢查询</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/how-to/maintain/identify-abnormal-queries/identify-expensive-queries/">
<span>定位消耗系统资源多的查询</span>
</a>
</li></ul>
</li></ul>
</li><li class="has-child"><a href="#">
<span>扩容缩容</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs-cn/dev/how-to/scale/with-ansible/">
<span>使用 Ansible 扩容缩容</span>
</a>
</li></ul>
</li><li class="has-child"><a href="#">
<span>升级</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs-cn/dev/how-to/upgrade/from-previous-version/">
<span>升级至最新开发版</span>
</a>
</li></ul>
</li><li class="has-child"><a href="#">
<span>故障诊断</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs-cn/dev/how-to/troubleshoot/cluster-setup/">
<span>集群配置诊断</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/how-to/troubleshoot/tidb-lightning/">
<span>TiDB Lightning 故障诊断</span>
</a>
</li></ul>
</li></ul>
</li><li class="has-child"><a href="#">
<span>参考手册</span>
<i class="icon-arrow"></i></a><ul><li class="has-child"><a href="#">
<span>SQL</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs-cn/dev/reference/mysql-compatibility/">
<span>与 MySQL 兼容性对比</span>
</a>
</li><li class="has-child"><a href="#">
<span>SQL 语言结构</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/language-structure/literal-values/">
<span>字面值</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/language-structure/schema-object-names/">
<span>Schema 对象名</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/language-structure/keywords-and-reserved-words/">
<span>关键字和保留字</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/language-structure/user-defined-variables/">
<span>用户自定义变量</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/language-structure/expression-syntax/">
<span>表达式语法</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/language-structure/comment-syntax/">
<span>注释语法</span>
</a>
</li></ul>
</li><li class="has-child"><a href="#">
<span>表属性和列属性</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/attributes/auto-random/">
<span class="has-code">`AUTO_RANDOM`</span>
</a>
</li></ul>
</li><li class="has-child"><a href="#">
<span>数据类型</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/data-types/overview/">
<span>概述</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/data-types/default-values/">
<span>默认值</span>
</a>
</li><li class="has-child"><a href="#">
<span>数值类型</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/data-types/numeric/#bit-%e7%b1%bb%e5%9e%8b">
<span class="has-code">`BIT`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/data-types/numeric/#boolean-%e7%b1%bb%e5%9e%8b">
<span class="has-code">`BOOL|BOOLEAN`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/data-types/numeric/#tinyint-%e7%b1%bb%e5%9e%8b">
<span class="has-code">`TINYINT`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/data-types/numeric/#smallint-%e7%b1%bb%e5%9e%8b">
<span class="has-code">`SMALLINT`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/data-types/numeric/#mediumint-%e7%b1%bb%e5%9e%8b">
<span class="has-code">`MEDIUMINT`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/data-types/numeric/#integer-%e7%b1%bb%e5%9e%8b">
<span class="has-code">`INT|INTEGER`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/data-types/numeric/#bigint-%e7%b1%bb%e5%9e%8b">
<span class="has-code">`BIGINT`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/data-types/numeric/#decimal-%e7%b1%bb%e5%9e%8b">
<span class="has-code">`DECIMAL`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/data-types/numeric/#float-%e7%b1%bb%e5%9e%8b">
<span class="has-code">`FLOAT`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/data-types/numeric/#double-%e7%b1%bb%e5%9e%8b">
<span class="has-code">`DOUBLE`</span>
</a>
</li></ul>
</li><li class="has-child"><a href="#">
<span>日期和时间类型</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/data-types/date-and-time/#date-%e7%b1%bb%e5%9e%8b">
<span class="has-code">`DATE`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/data-types/date-and-time/#datetime-%e7%b1%bb%e5%9e%8b">
<span class="has-code">`DATETIME`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/data-types/date-and-time/#timestamp-%e7%b1%bb%e5%9e%8b">
<span class="has-code">`TIMESTAMP`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/data-types/date-and-time/#time-%e7%b1%bb%e5%9e%8b">
<span class="has-code">`TIME`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/data-types/date-and-time/#year-%e7%b1%bb%e5%9e%8b">
<span class="has-code">`YEAR`</span>
</a>
</li></ul>
</li><li class="has-child"><a href="#">
<span>字符串类型</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/data-types/string/#char-%e7%b1%bb%e5%9e%8b">
<span class="has-code">`CHAR`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/data-types/string/#varchar-%e7%b1%bb%e5%9e%8b">
<span class="has-code">`VARCHAR`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/data-types/string/#text-%e7%b1%bb%e5%9e%8b">
<span class="has-code">`TEXT`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/data-types/string/#longtext-%e7%b1%bb%e5%9e%8b">
<span class="has-code">`LONGTEXT`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/data-types/string/#binary-%e7%b1%bb%e5%9e%8b">
<span class="has-code">`BINARY`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/data-types/string/#varbinary-%e7%b1%bb%e5%9e%8b">
<span class="has-code">`VARBINARY`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/data-types/string/#tinyblob-%e7%b1%bb%e5%9e%8b">
<span class="has-code">`TINYBLOB`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/data-types/string/#blob-%e7%b1%bb%e5%9e%8b">
<span class="has-code">`BLOB`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/data-types/string/#mediumblob-%e7%b1%bb%e5%9e%8b">
<span class="has-code">`MEDIUMBLOB`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/data-types/string/#longblob-%e7%b1%bb%e5%9e%8b">
<span class="has-code">`LONGBLOB`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/data-types/string/#enum-%e7%b1%bb%e5%9e%8b">
<span class="has-code">`ENUM`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/data-types/string/#set-%e7%b1%bb%e5%9e%8b">
<span class="has-code">`SET`</span>
</a>
</li></ul>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/data-types/json/">
<span>JSON Type</span>
</a>
</li></ul>
</li><li class="has-child"><a href="#">
<span>函数与操作符</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/functions-and-operators/reference/">
<span>函数与操作符概述</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/functions-and-operators/type-conversion/">
<span>表达式求值的类型转换</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/functions-and-operators/operators/">
<span>操作符</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/functions-and-operators/control-flow-functions/">
<span>控制流程函数</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/functions-and-operators/string-functions/">
<span>字符串函数</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/functions-and-operators/numeric-functions-and-operators/">
<span>数值函数与操作符</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/functions-and-operators/date-and-time-functions/">
<span>日期和时间函数</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/functions-and-operators/bit-functions-and-operators/">
<span>位函数和操作符</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/functions-and-operators/cast-functions-and-operators/">
<span>Cast 函数和操作符</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/functions-and-operators/encryption-and-compression-functions/">
<span>加密和压缩函数</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/functions-and-operators/information-functions/">
<span>信息函数</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/functions-and-operators/json-functions/">
<span>JSON 函数</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/functions-and-operators/aggregate-group-by-functions/">
<span>GROUP BY 聚合函数</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/functions-and-operators/window-functions/">
<span>窗口函数</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/functions-and-operators/miscellaneous-functions/">
<span>其它函数</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/functions-and-operators/precision-math/">
<span>精度数学</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/functions-and-operators/expressions-pushed-down/">
<span>下推到 TiKV 的表达式列表</span>
</a>
</li></ul>
</li><li class="has-child"><a href="#">
<span>SQL 语句</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/statements/add-column/">
<span class="has-code">`ADD COLUMN`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/statements/add-index/">
<span class="has-code">`ADD INDEX`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/statements/admin/">
<span class="has-code">`ADMIN`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/statements/alter-database/">
<span class="has-code">`ALTER DATABASE`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/statements/alter-table/">
<span class="has-code">`ALTER TABLE`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/statements/alter-user/">
<span class="has-code">`ALTER USER`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/statements/analyze-table/">
<span class="has-code">`ANALYZE TABLE`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/statements/begin/">
<span class="has-code">`BEGIN`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/statements/commit/">
<span class="has-code">`COMMIT`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/statements/create-database/">
<span class="has-code">`CREATE DATABASE`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/statements/create-index/">
<span class="has-code">`CREATE INDEX`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/statements/create-sequence/">
<span class="has-code">`CREATE SEQUENCE`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/statements/create-table-like/">
<span class="has-code">`CREATE TABLE LIKE`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/statements/create-table/">
<span class="has-code">`CREATE TABLE`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/statements/create-user/">
<span class="has-code">`CREATE USER`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/statements/create-view/">
<span class="has-code">`CREATE VIEW`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/statements/deallocate/">
<span class="has-code">`DEALLOCATE`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/statements/delete/">
<span class="has-code">`DELETE`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/statements/desc/">
<span class="has-code">`DESC`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/statements/describe/">
<span class="has-code">`DESCRIBE`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/statements/do/">
<span class="has-code">`DO`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/statements/drop-column/">
<span class="has-code">`DROP COLUMN`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/statements/drop-database/">
<span class="has-code">`DROP DATABASE`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/statements/drop-index/">
<span class="has-code">`DROP INDEX`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/statements/drop-sequence/">
<span class="has-code">`DROP SEQUENCE`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/statements/drop-table/">
<span class="has-code">`DROP TABLE`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/statements/drop-user/">
<span class="has-code">`DROP USER`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/statements/drop-view/">
<span class="has-code">`DROP VIEW`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/statements/execute/">
<span class="has-code">`EXECUTE`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/statements/explain-analyze/">
<span class="has-code">`EXPLAIN ANALYZE`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/statements/explain/">
<span class="has-code">`EXPLAIN`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/statements/flashback-table/">
<span class="has-code">`FLASHBACK TABLE`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/statements/flush-privileges/">
<span class="has-code">`FLUSH PRIVILEGES`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/statements/flush-status/">
<span class="has-code">`FLUSH STATUS`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/statements/flush-tables/">
<span class="has-code">`FLUSH TABLES`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/statements/grant-privileges/">
<span class="has-code">`GRANT &lt;privileges&gt;`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/statements/insert/">
<span class="has-code">`INSERT`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/statements/kill/">
<span class="has-code">`KILL [TIDB]`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/statements/load-data/">
<span class="has-code">`LOAD DATA`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/statements/modify-column/">
<span class="has-code">`MODIFY COLUMN`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/statements/prepare/">
<span class="has-code">`PREPARE`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/statements/recover-table/">
<span class="has-code">`RECOVER TABLE`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/statements/rename-index/">
<span class="has-code">`RENAME INDEX`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/statements/rename-table/">
<span class="has-code">`RENAME TABLE`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/statements/replace/">
<span class="has-code">`REPLACE`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/statements/revoke-privileges/">
<span class="has-code">`REVOKE &lt;privileges&gt;`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/statements/rollback/">
<span class="has-code">`ROLLBACK`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/statements/select/">
<span class="has-code">`SELECT`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/statements/set-names/">
<span class="has-code">`SET [NAMES|CHARACTER SET]`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/statements/set-password/">
<span class="has-code">`SET PASSWORD`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/statements/set-transaction/">
<span class="has-code">`SET TRANSACTION`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/statements/set-variable/">
<span class="has-code">`SET [GLOBAL|SESSION] &lt;variable&gt;`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/statements/show-character-set/">
<span class="has-code">`SHOW CHARACTER SET`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/statements/show-collation/">
<span class="has-code">`SHOW COLLATION`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/statements/show-columns-from/">
<span class="has-code">`SHOW [FULL] COLUMNS FROM`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/statements/show-create-sequence/">
<span class="has-code">`SHOW CREATE SEQUENCE`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/statements/show-create-table/">
<span class="has-code">`SHOW CREATE TABLE`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/statements/show-create-user/">
<span class="has-code">`SHOW CREATE USER`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/statements/show-databases/">
<span class="has-code">`SHOW DATABASES`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/statements/show-engines/">
<span class="has-code">`SHOW ENGINES`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/statements/show-errors/">
<span class="has-code">`SHOW ERRORS`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/statements/show-fields-from/">
<span class="has-code">`SHOW [FULL] FIELDS FROM`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/statements/show-grants/">
<span class="has-code">`SHOW GRANTS`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/statements/show-indexes/">
<span class="has-code">`SHOW INDEXES [FROM|IN]`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/statements/show-index/">
<span class="has-code">`SHOW INDEX [FROM|IN]`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/statements/show-keys/">
<span class="has-code">`SHOW KEYS [FROM|IN]`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/statements/show-privileges/">
<span class="has-code">`SHOW PRIVILEGES`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/statements/show-processlist/">
<span class="has-code">`SHOW [FULL] PROCESSSLIST`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/statements/show-schemas/">
<span class="has-code">`SHOW SCHEMAS`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/statements/show-tables/">
<span class="has-code">`SHOW [FULL] TABLES`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/statements/show-table-regions/">
<span class="has-code">`SHOW TABLE REGIONS`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/statements/show-table-status/">
<span class="has-code">`SHOW TABLE STATUS`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/statements/show-variables/">
<span class="has-code">`SHOW [GLOBAL|SESSION] VARIABLES`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/statements/show-warnings/">
<span class="has-code">`SHOW WARNINGS`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/statements/split-region/">
<span class="has-code">`SPLIT REGION`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/statements/start-transaction/">
<span class="has-code">`START TRANSACTION`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/statements/trace/">
<span class="has-code">`TRACE`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/statements/truncate/">
<span class="has-code">`TRUNCATE`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/statements/update/">
<span class="has-code">`UPDATE`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/statements/use/">
<span class="has-code">`USE`</span>
</a>
</li></ul>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/constraints/">
<span>约束</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/generated-columns/">
<span>生成列</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/partitioning/">
<span>分区表</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/character-set/">
<span>字符集</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/sql-mode/">
<span>SQL 模式</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/sql/view/">
<span>视图</span>
</a>
</li></ul>
</li><li class="has-child"><a href="#">
<span>配置</span>
<i class="icon-arrow"></i></a><ul><li class="has-child"><a href="#">
<span>tidb-server</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs-cn/dev/reference/configuration/tidb-server/mysql-variables/">
<span>MySQL 系统变量</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/configuration/tidb-server/tidb-specific-variables/">
<span>TiDB 特定系统变量</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/configuration/tidb-server/configuration/">
<span>配置参数</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/configuration/tidb-server/configuration-file/">
<span>配置文件描述</span>
</a>
</li></ul>
</li><li class="has-child"><a href="#">
<span>pd-server</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs-cn/dev/reference/configuration/pd-server/configuration/">
<span>配置参数</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/configuration/pd-server/configuration-file/">
<span>配置文件描述</span>
</a>
</li></ul>
</li><li class="has-child"><a href="#">
<span>tikv-server</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs-cn/dev/reference/configuration/tikv-server/configuration/">
<span>配置参数</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/configuration/tikv-server/configuration-file/">
<span>配置文件描述</span>
</a>
</li></ul>
</li></ul>
</li><li class="has-child"><a href="#">
<span>安全</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs-cn/dev/reference/security/compatibility/">
<span>与 MySQL 的安全特性差异</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/security/privilege-system/">
<span>TiDB 数据库权限管理</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/security/user-account-management/">
<span>TiDB 用户账户管理</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/security/role-based-access-control/">
<span>基于角色的访问控制</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/security/cert-based-authentication/">
<span>TiDB 证书鉴权使用指南</span>
</a>
</li></ul>
</li><li class="has-child"><a href="#">
<span>事务</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs-cn/dev/reference/transactions/overview/">
<span>事务概览</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/transactions/transaction-isolation/">
<span>隔离级别</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/transactions/transaction-optimistic/">
<span>乐观事务</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/transactions/transaction-pessimistic/">
<span>悲观事务</span>
</a>
</li></ul>
</li><li class="has-child"><a href="#">
<span>系统数据库</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs-cn/dev/reference/system-databases/mysql/">
<span class="has-code">`mysql`</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/system-databases/information-schema/">
<span class="has-code">`information_schema`</span>
</a>
</li></ul>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/error-codes/">
<span>错误码</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/supported-clients/">
<span>支持的连接器和 API</span>
</a>
</li><li class="has-child"><a href="#">
<span>垃圾回收 (GC)</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs-cn/dev/reference/garbage-collection/overview/">
<span>GC 机制简介</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/garbage-collection/configuration/">
<span>GC 配置</span>
</a>
</li></ul>
</li><li class="has-child"><a href="#">
<span>性能调优</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs-cn/dev/reference/performance/sql-optimizer-overview/">
<span>SQL 优化流程</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/performance/understanding-the-query-execution-plan/">
<span>理解 TiDB 执行计划</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/performance/execution-plan-bind/">
<span>执行计划绑定</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/performance/statistics/">
<span>统计信息概述</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/performance/optimizer-hints/">
<span>Optimizer Hints</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/performance/follower-read/">
<span>Follower Read</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/performance/check-cluster-status-using-sql-statements/">
<span>使用 SQL 语句检查 TiDB 集群状态</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/performance/statement-summary/">
<span>Statement Summary Table</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/performance/tune-tikv/">
<span>TiKV 调优</span>
</a>
</li><li class="leaf-child">
<a href="https://pingcap.com/blog-cn/tidb-best-practice/">
<span>TiDB 最佳实践</span>
</a>
</li></ul>
</li><li class="has-child"><a href="#">
<span>监控指标</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs-cn/dev/reference/key-monitoring-metrics/overview-dashboard/">
<span>Overview 面板</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/key-monitoring-metrics/tidb-dashboard/">
<span>TiDB 面板</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/key-monitoring-metrics/pd-dashboard/">
<span>PD 面板</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/key-monitoring-metrics/tikv-dashboard/">
<span>TiKV 面板</span>
</a>
</li></ul>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/alert-rules/">
<span>报警规则</span>
</a>
</li><li class="has-child"><a href="#">
<span>最佳实践</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs-cn/dev/reference/best-practices/haproxy/">
<span>HAProxy 最佳实践</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/best-practices/java-app/">
<span>Java 应用开发最佳实践</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/best-practices/high-concurrency/">
<span>高并发写入场景最佳实践</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/best-practices/grafana-monitor/">
<span>Grafana 监控最佳实践</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/best-practices/pd-scheduling/">
<span>PD 调度策略最佳实践</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/best-practices/massive-regions/">
<span>海量 Region 集群调优最佳实践</span>
</a>
</li></ul>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/tispark/">
<span>TiSpark 使用指南</span>
</a>
</li><li class="has-child"><a href="#">
<span>TiDB Binlog</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs-cn/dev/reference/tidb-binlog/overview/">
<span>概述</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/tidb-binlog/deploy/">
<span>部署使用</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/tidb-binlog/maintain/">
<span>运维管理</span>
</a>
</li><li class="has-child"><a href="#">
<span>配置说明</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs-cn/dev/reference/tidb-binlog/configs/#pump">
<span>Pump</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/tidb-binlog/configs/#drainer">
<span>Drainer</span>
</a>
</li></ul>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/tidb-binlog/upgrade/">
<span>版本升级</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/tidb-binlog/monitor/">
<span>监控告警</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/tidb-binlog/reparo/">
<span>增量恢复</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/tidb-binlog/binlog-slave-client/">
<span>Kafka 自定义开发</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/tidb-binlog/relay-log/">
<span>TiDB Binlog Relay Log</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/tidb-binlog/bi-repl/">
<span>集群间双向同步</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/tidb-binlog/glossary/">
<span>术语表</span>
</a>
</li><li class="has-child"><a href="#">
<span>故障诊断</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs-cn/dev/reference/tidb-binlog/troubleshoot/binlog/">
<span>故障诊断</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/tidb-binlog/troubleshoot/error-handling/">
<span>常见错误修复</span>
</a>
</li></ul>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/tidb-binlog/faq/">
<span>FAQ</span>
</a>
</li></ul>
</li><li class="has-child"><a href="#">
<span>周边工具</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs-cn/dev/reference/tools/user-guide/">
<span>工具使用指南</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/tools/mydumper/">
<span>Mydumper</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/tools/loader/">
<span>Loader</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/tools/syncer/">
<span>Syncer</span>
</a>
</li><li class="has-child"><a href="#">
<span>Data Migration</span>
<i class="icon-arrow"></i></a><ul><li class="has-child"><a href="#">
<span>概述</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs-cn/dev/reference/tools/data-migration/overview/#dm-%e6%9e%b6%e6%9e%84">
<span>DM 架构</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/tools/data-migration/overview/#%e5%90%8c%e6%ad%a5%e5%8a%9f%e8%83%bd%e4%bb%8b%e7%bb%8d">
<span>同步功能介绍</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/tools/data-migration/overview/#%e4%bd%bf%e7%94%a8%e9%99%90%e5%88%b6">
<span>使用限制</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/tools/data-migration/dm-worker-intro/">
<span>DM-worker 简介</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/tools/data-migration/relay-log/">
<span>DM Relay Log</span>
</a>
</li></ul>
</li><li class="has-child"><a href="#">
<span>核心特性</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs-cn/dev/reference/tools/data-migration/features/overview/#table-routing">
<span>Table Routing</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/tools/data-migration/features/overview/#black--white-table-lists">
<span>Black &amp; White Lists</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/tools/data-migration/features/overview/#binlog-event-filter">
<span>Binlog Event Filter</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/tools/data-migration/features/overview/#%e5%90%8c%e6%ad%a5%e5%bb%b6%e8%bf%9f%e7%9b%91%e6%8e%a7">
<span>同步延迟监控</span>
</a>
</li><li class="has-child"><a href="#">
<span>Shard Support</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs-cn/dev/reference/tools/data-migration/features/shard-merge/">
<span>简介</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/tools/data-migration/features/shard-merge/#%e4%bd%bf%e7%94%a8%e9%99%90%e5%88%b6">
<span>使用限制</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/tools/data-migration/features/manually-handling-sharding-ddl-locks/">
<span>手动处理 Sharding DDL Lock</span>
</a>
</li></ul>
</li></ul>
</li><li class="has-child"><a href="#">
<span>使用场景</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs-cn/dev/reference/tools/data-migration/usage-scenarios/simple-synchronization/">
<span>简单的从库同步场景</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/tools/data-migration/usage-scenarios/shard-merge/">
<span>分库分表合并场景</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/tools/data-migration/usage-scenarios/best-practice-dm-shard/">
<span>分表合并数据迁移最佳实践</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/tools/data-migration/usage-scenarios/master-slave-switch/">
<span>DM-worker 在上游 MySQL 主从间切换</span>
</a>
</li></ul>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/tools/data-migration/deploy/">
<span>部署使用</span>
</a>
</li><li class="has-child"><a href="#">
<span>配置</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs-cn/dev/reference/tools/data-migration/configure/overview/">
<span>概述</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/tools/data-migration/configure/dm-master-configuration-file/">
<span>DM-master 配置</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/tools/data-migration/configure/dm-worker-configuration-file/">
<span>DM-worker 配置</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/tools/data-migration/configure/task-configuration-file/">
<span>任务配置</span>
</a>
</li></ul>
</li><li class="has-child"><a href="#">
<span>DM 集群管理</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs-cn/dev/reference/tools/data-migration/cluster-operations/">
<span>集群操作</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/tools/data-migration/dm-upgrade/">
<span>集群升级</span>
</a>
</li></ul>
</li><li class="has-child"><a href="#">
<span>DM 同步任务管理</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs-cn/dev/reference/tools/data-migration/manage-tasks/">
<span>管理数据同步任务</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/tools/data-migration/precheck/">
<span>任务前置检查</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/tools/data-migration/query-status/">
<span>任务状态查询</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/tools/data-migration/skip-replace-sqls/">
<span>跳过或替代执行异常的 SQL 语句</span>
</a>
</li></ul>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/tools/data-migration/monitor/">
<span>监控 DM 集群</span>
</a>
</li><li class="has-child"><a href="#">
<span>从与 MySQL 兼容的数据库迁移数据</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs-cn/dev/how-to/migrate/from-mysql-aurora/">
<span>从 MySQL/Amazon Aurora MySQL 迁移数据</span>
</a>
</li></ul>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/tools/data-migration/dm-portal/">
<span>DM Portal</span>
</a>
</li><li class="has-child"><a href="#">
<span>DM 故障诊断</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs-cn/dev/reference/tools/data-migration/troubleshoot/dm/">
<span>故障诊断</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/tools/data-migration/troubleshoot/error-system/">
<span>错误含义</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/tools/data-migration/troubleshoot/error-handling/">
<span>常见错误修复</span>
</a>
</li></ul>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/tools/data-migration/faq/">
<span>DM FAQ</span>
</a>
</li><li class="has-child"><a href="#">
<span>版本发布历史</span>
<i class="icon-arrow"></i></a><ul><li class="has-child"><a href="#">
<span>v1.0</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs-cn/dev/reference/tools/data-migration/releases/1.0.2/">
<span>1.0.2</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/tools/data-migration/releases/1.0.3/">
<span>1.0.3</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/tools/data-migration/releases/1.0.4/">
<span>1.0.4</span>
</a>
</li></ul>
</li></ul>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/tools/data-migration/glossary/">
<span>TiDB DM 术语表</span>
</a>
</li></ul>
</li><li class="has-child"><a href="#">
<span>TiDB Lightning</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs-cn/dev/reference/tools/tidb-lightning/overview/">
<span>概述</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/tools/tidb-lightning/deployment/">
<span>部署执行</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/tools/tidb-lightning/config/">
<span>参数说明</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/tools/tidb-lightning/checkpoints/">
<span>断点续传</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/tools/tidb-lightning/table-filter/">
<span>表库过滤</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/tools/tidb-lightning/csv/">
<span>CSV 支持</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/tools/tidb-lightning/tidb-backend/">
<span>TiDB-backend</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/tools/tidb-lightning/web/">
<span>Web 界面</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/tools/tidb-lightning/monitor/">
<span>监控告警</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/how-to/troubleshoot/tidb-lightning/">
<span>故障诊断</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/faq/tidb-lightning/">
<span>FAQ</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/tools/tidb-lightning/glossary/">
<span>术语表</span>
</a>
</li></ul>
</li><li class="has-child"><a href="#">
<span>TiCDC</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs-cn/dev/reference/tools/ticdc/overview/">
<span>概述</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/tools/ticdc/deploy/">
<span>部署使用</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/tools/ticdc/manage/">
<span>集群和同步任务管理</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/tools/ticdc/sink/">
<span>Sink URI 配置规则</span>
</a>
</li></ul>
</li><li class="has-child"><a href="#">
<span>sync-diff-inspector</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs-cn/dev/reference/tools/sync-diff-inspector/overview/">
<span>概述</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/tools/sync-diff-inspector/route-diff/">
<span>不同库名或表名的数据校验</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/tools/sync-diff-inspector/shard-diff/">
<span>分库分表场景下的数据校验</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/tools/sync-diff-inspector/tidb-diff/">
<span>TiDB 主从集群的数据校验</span>
</a>
</li></ul>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/tools/pd-control/">
<span>PD Control</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/tools/pd-recover/">
<span>PD Recover</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/tools/tikv-control/">
<span>TiKV Control</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/tools/tidb-control/">
<span>TiDB Controller</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/reference/tools/download/">
<span>工具下载</span>
</a>
</li></ul>
</li></ul>
</li><li class="has-child"><a href="#">
<span>TiDB in Kubernetes</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs-cn/dev/tidb-in-kubernetes/tidb-operator-overview/">
<span>TiDB Operator 简介</span>
</a>
</li><li class="has-child"><a href="#">
<span>快速上手</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs-cn/dev/tidb-in-kubernetes/get-started/deploy-tidb-from-kubernetes-kind/">
<span>kind</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/tidb-in-kubernetes/get-started/deploy-tidb-from-kubernetes-gke/">
<span>GKE</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/tidb-in-kubernetes/get-started/deploy-tidb-from-kubernetes-minikube/">
<span>Minikube</span>
</a>
</li></ul>
</li><li class="has-child"><a href="#">
<span>部署</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs-cn/dev/tidb-in-kubernetes/deploy/prerequisites/">
<span>集群环境要求</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/tidb-in-kubernetes/deploy/tidb-operator/">
<span>部署 TiDB Operator</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/tidb-in-kubernetes/deploy/general-kubernetes/">
<span>标准 Kubernetes 上的 TiDB 集群</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/tidb-in-kubernetes/deploy/aws-eks/">
<span>AWS EKS 上的 TiDB 集群</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/tidb-in-kubernetes/deploy/gcp-gke/">
<span>GCP 上的 TiDB 集群</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/tidb-in-kubernetes/deploy/alibaba-cloud/">
<span>阿里云上的 TiDB 集群</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/tidb-in-kubernetes/deploy/access-tidb/">
<span>访问 Kubernetes 上的 TiDB 集群</span>
</a>
</li></ul>
</li><li class="has-child"><a href="#">
<span>配置</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs-cn/dev/tidb-in-kubernetes/initialize-cluster/">
<span>初始化集群</span>
</a>
</li></ul>
</li><li class="leaf-child">
<a href="/docs-cn/dev/tidb-in-kubernetes/monitor/tidb-in-kubernetes/">
<span>监控</span>
</a>
</li><li class="has-child"><a href="#">
<span>运维</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs-cn/dev/tidb-in-kubernetes/maintain/destroy-tidb-cluster/">
<span>销毁 TiDB 集群</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/tidb-in-kubernetes/maintain/kubernetes-node/">
<span>维护 TiDB 集群所在节点</span>
</a>
</li><li class="has-child"><a href="#">
<span>备份与恢复</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs-cn/dev/tidb-in-kubernetes/maintain/backup-and-restore/charts/">
<span>基于 Helm Charts 的备份恢复</span>
</a>
</li><li class="has-child"><a href="#">
<span>基于 CRD 的备份恢复</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs-cn/dev/tidb-in-kubernetes/maintain/backup-and-restore/backup-gcs/">
<span>备份 TiDB 集群到 GCS</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/tidb-in-kubernetes/maintain/backup-and-restore/restore-gcs/">
<span>恢复 GCS 上的备份数据</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/tidb-in-kubernetes/maintain/backup-and-restore/backup-s3/">
<span>备份 TiDB 集群到兼容 S3 的存储</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/tidb-in-kubernetes/maintain/backup-and-restore/restore-s3/">
<span>恢复 S3 兼容存储上的备份数据</span>
</a>
</li></ul>
</li><li class="leaf-child">
<a href="/docs-cn/dev/tidb-in-kubernetes/maintain/backup-and-restore/lightning/">
<span>使用 TiDB Lightning 恢复集群数据</span>
</a>
</li></ul>
</li><li class="leaf-child">
<a href="/docs-cn/dev/tidb-in-kubernetes/maintain/log-collecting/">
<span>收集日志</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/tidb-in-kubernetes/maintain/auto-failover/">
<span>集群故障自动转移</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/tidb-in-kubernetes/maintain/tidb-binlog/">
<span>TiDB Binlog</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/tidb-in-kubernetes/maintain/restart/">
<span>重启 TiDB 集群</span>
</a>
</li></ul>
</li><li class="leaf-child">
<a href="/docs-cn/dev/tidb-in-kubernetes/scale-in-kubernetes/">
<span>扩缩容</span>
</a>
</li><li class="has-child"><a href="#">
<span>升级</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs-cn/dev/tidb-in-kubernetes/upgrade/tidb-cluster/">
<span>TiDB 集群</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/tidb-in-kubernetes/upgrade/tidb-operator/">
<span>TiDB Operator</span>
</a>
</li></ul>
</li><li class="has-child"><a href="#">
<span>参考信息</span>
<i class="icon-arrow"></i></a><ul><li class="has-child"><a href="#">
<span>配置</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs-cn/dev/tidb-in-kubernetes/reference/configuration/tidb-cluster/">
<span>集群配置</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/tidb-in-kubernetes/reference/configuration/backup/">
<span>备份配置</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/tidb-in-kubernetes/reference/configuration/storage-class/">
<span>PV 配置</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/tidb-in-kubernetes/reference/configuration/tidb-drainer/">
<span>TiDB Drainer</span>
</a>
</li></ul>
</li><li class="has-child"><a href="#">
<span>工具</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs-cn/dev/tidb-in-kubernetes/reference/tools/tkctl/">
<span>tkctl</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/tidb-in-kubernetes/reference/tools/in-kubernetes/">
<span>相关工具使用</span>
</a>
</li></ul>
</li><li class="has-child"><a href="#">
<span>组件</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs-cn/dev/tidb-in-kubernetes/reference/components/tidb-scheduler/">
<span>TiDB Scheduler 扩展调度器</span>
</a>
</li></ul>
</li></ul>
</li><li class="leaf-child">
<a href="/docs-cn/dev/tidb-in-kubernetes/troubleshoot/">
<span>故障诊断</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/tidb-in-kubernetes/faq/">
<span>常见问题</span>
</a>
</li></ul>
</li><li class="has-child"><a href="#">
<span>常见问题 (FAQ)</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs-cn/dev/faq/tidb/">
<span>TiDB FAQ</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/faq/tidb-lightning/">
<span>TiDB Lightning FAQ</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/faq/upgrade/">
<span>升级 FAQ</span>
</a>
</li></ul>
</li><li class="has-child"><a href="#">
<span>技术支持</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs-cn/dev/support-resources/">
<span>支持渠道</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/report-issue/">
<span>反馈问题</span>
</a>
</li></ul>
</li><li class="has-child"><a href="#">
<span>贡献</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs-cn/dev/contribute/#%e6%88%90%e4%b8%ba-tidb-%e7%9a%84%e8%b4%a1%e7%8c%ae%e8%80%85">
<span>贡献代码</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/contribute/#%e6%94%b9%e8%bf%9b%e6%96%87%e6%a1%a3">
<span>改进文档</span>
</a>
</li></ul>
</li><li class="leaf-child">
<a href="/docs-cn/dev/roadmap/">
<span>TiDB 路线图</span>
</a>
</li><li class="has-child"><a href="#">
<span>版本发布历史</span>
<i class="icon-arrow"></i></a><ul><li class="has-child"><a href="#">
<span>v4.0</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs-cn/dev/releases/4.0.0-beta.1/">
<span>4.0.0-beta.1</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/releases/4.0.0-beta/">
<span>4.0.0-beta</span>
</a>
</li></ul>
</li><li class="has-child"><a href="#">
<span>v3.1</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs-cn/dev/releases/3.1.0-beta.2/">
<span>3.1.0-beta.2</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/releases/3.1.0-beta.1/">
<span>3.1.0-beta.1</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/releases/3.1.0-beta/">
<span>3.1.0-beta</span>
</a>
</li></ul>
</li><li class="has-child"><a href="#">
<span>v3.0</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs-cn/dev/releases/3.0.12/">
<span>3.0.12</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/releases/3.0.11/">
<span>3.0.11</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/releases/3.0.10/">
<span>3.0.10</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/releases/3.0.9/">
<span>3.0.9</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/releases/3.0.8/">
<span>3.0.8</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/releases/3.0.7/">
<span>3.0.7</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/releases/3.0.6/">
<span>3.0.6</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/releases/3.0.5/">
<span>3.0.5</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/releases/3.0.4/">
<span>3.0.4</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/releases/3.0.3/">
<span>3.0.3</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/releases/3.0.2/">
<span>3.0.2</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/releases/3.0.1/">
<span>3.0.1</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/releases/3.0-ga/">
<span>3.0 GA</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/releases/3.0.0-rc.3/">
<span>3.0.0-rc.3</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/releases/3.0.0-rc.2/">
<span>3.0.0-rc.2</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/releases/3.0.0-rc.1/">
<span>3.0.0-rc.1</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/releases/3.0.0-beta.1/">
<span>3.0.0-beta.1</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/releases/3.0beta/">
<span>3.0.0-beta</span>
</a>
</li></ul>
</li><li class="has-child"><a href="#">
<span>v2.1</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs-cn/dev/releases/2.1.19/">
<span>2.1.19</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/releases/2.1.18/">
<span>2.1.18</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/releases/2.1.17/">
<span>2.1.17</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/releases/2.1.16/">
<span>2.1.16</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/releases/2.1.15/">
<span>2.1.15</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/releases/2.1.14/">
<span>2.1.14</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/releases/2.1.13/">
<span>2.1.13</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/releases/2.1.12/">
<span>2.1.12</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/releases/2.1.11/">
<span>2.1.11</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/releases/2.1.10/">
<span>2.1.10</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/releases/2.1.9/">
<span>2.1.9</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/releases/2.1.8/">
<span>2.1.8</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/releases/2.1.7/">
<span>2.1.7</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/releases/2.1.6/">
<span>2.1.6</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/releases/2.1.5/">
<span>2.1.5</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/releases/2.1.4/">
<span>2.1.4</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/releases/2.1.3/">
<span>2.1.3</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/releases/2.1.2/">
<span>2.1.2</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/releases/2.1.1/">
<span>2.1.1</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/releases/2.1ga/">
<span>2.1 GA</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/releases/21rc5/">
<span>2.1 RC5</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/releases/21rc4/">
<span>2.1 RC4</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/releases/21rc3/">
<span>2.1 RC3</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/releases/21rc2/">
<span>2.1 RC2</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/releases/21rc1/">
<span>2.1 RC1</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/releases/21beta/">
<span>2.1 Beta</span>
</a>
</li></ul>
</li><li class="has-child"><a href="#">
<span>v2.0</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs-cn/dev/releases/2.0.11/">
<span>2.0.11</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/releases/2.0.10/">
<span>2.0.10</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/releases/209/">
<span>2.0.9</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/releases/208/">
<span>2.0.8</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/releases/207/">
<span>2.0.7</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/releases/206/">
<span>2.0.6</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/releases/205/">
<span>2.0.5</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/releases/204/">
<span>2.0.4</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/releases/203/">
<span>2.0.3</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/releases/202/">
<span>2.0.2</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/releases/201/">
<span>2.0.1</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/releases/2.0ga/">
<span>2.0</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/releases/2rc5/">
<span>2.0 RC5</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/releases/2rc4/">
<span>2.0 RC4</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/releases/2rc3/">
<span>2.0 RC3</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/releases/2rc1/">
<span>2.0 RC1</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/releases/11beta/">
<span>1.1 Beta</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/releases/11alpha/">
<span>1.1 Alpha</span>
</a>
</li></ul>
</li><li class="has-child"><a href="#">
<span>v1.0</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs-cn/dev/releases/ga/">
<span>1.0</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/releases/prega/">
<span>Pre-GA</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/releases/rc4/">
<span>RC4</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/releases/rc3/">
<span>RC3</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/releases/rc2/">
<span>RC2</span>
</a>
</li><li class="leaf-child">
<a href="/docs-cn/dev/releases/rc1/">
<span>RC1</span>
</a>
</li></ul>
</li></ul>
</li><li class="leaf-child">
<a href="/docs-cn/dev/glossary/">
<span>术语表</span>
</a>
</li></ul>
</div>
</div>
</div>
<div class="archive">
<div class="content markdown-body">
<h1 id="faq">FAQ</h1>
<h2 id="-tidb-">一、 TiDB 介绍、架构、原理</h2>
<h3 id="11-tidb-">1.1 TiDB 介绍及整体架构</h3>
<h4 id="111-tidb-">1.1.1 TiDB 整体架构</h4>
<p><a href="/docs-cn/dev/overview#tidb-%E7%AE%80%E4%BB%8B">TiDB 简介</a></p>
<h4 id="112-tidb-">1.1.2 TiDB 是什么？</h4>
<p>TiDB 是一个分布式 NewSQL 数据库。它支持水平弹性扩展、ACID 事务、标准 SQL、MySQL 语法和 MySQL 协议，具有数据强一致的高可用特性，是一个不仅适合 OLTP 场景还适合 OLAP 场景的混合数据库。</p>
<h4 id="113-tidb--mysql-">1.1.3 TiDB 是基于 MySQL 开发的吗？</h4>
<p>不是，虽然 TiDB 支持 MySQL 语法和协议，但是 TiDB 是由 PingCAP 团队完全自主开发的产品。</p>
<h4 id="114-tidbtikvplacement-driver-pd--">1.1.4 TiDB、TiKV、Placement Driver (PD)  主要作用？</h4>
<ul>
<li>TiDB 是 Server 计算层，主要负责 SQL 的解析、制定查询计划、生成执行器。</li>
<li>TiKV 是分布式 Key-Value 存储引擎，用来存储真正的数据，简而言之，TiKV 是 TiDB 的存储引擎。</li>
<li>PD 是 TiDB 集群的管理组件，负责存储 TiKV 的元数据，同时也负责分配时间戳以及对 TiKV 做负载均衡调度。</li>
</ul>
<h4 id="115-tidb-">1.1.5 TiDB 易用性如何？</h4>
<p>TiDB 使用起来很简单，可以将 TiDB 集群当成 MySQL 来用，你可以将 TiDB 用在任何以 MySQL 作为后台存储服务的应用中，并且基本上不需要修改应用代码，同时你可以用大部分流行的 MySQL 管理工具来管理 TiDB。</p>
<h4 id="116-tidb--mysql-">1.1.6 TiDB 和 MySQL 兼容性如何？</h4>
<p>TiDB 目前还不支持触发器、存储过程、自定义函数、外键，除此之外，TiDB 支持绝大部分 MySQL 5.7 的语法。</p>
<p>详情参见<a href="/docs-cn/dev/reference/mysql-compatibility">与 MySQL 兼容性对比</a>。</p>
<h4 id="117-tidb-">1.1.7 TiDB 具备高可用的特性吗？</h4>
<p>TiDB 天然具备高可用特性，TiDB、TiKV、PD 这三个组件都能容忍部分实例失效，不影响整个集群的可用性。具体见 <a href="/docs-cn/dev/key-features#%E9%AB%98%E5%8F%AF%E7%94%A8">TiDB 高可用性</a>。</p>
<h4 id="118-tidb-">1.1.8 TiDB 数据是强一致的吗？</h4>
<p>TiDB 实现了快照隔离 (Snapshot Isolation) 级别的一致性。为与 MySQL 保持一致，又称其为“可重复读”。通过使用 <a href="https://raft.github.io/">Raft 一致性算法</a>，数据在各 TiKV 节点间复制为多副本，以确保某个节点挂掉时数据的安全性。</p>
<p>在底层，TiKV 使用复制日志 + 状态机 (State Machine) 的模型来复制数据。对于写入请求，数据被写入 Leader，然后 Leader 以日志的形式将命令复制到它的 Follower 中。当集群中的大多数节点收到此日志时，日志会被提交，状态机会相应作出变更。</p>
<h4 id="119-tidb-">1.1.9 TiDB 支持分布式事务吗？</h4>
<p>支持。无论是一个地方的几个节点，还是<a href="/docs-cn/dev/how-to/deploy/geographic-redundancy/overview">跨多个数据中心的多个节点</a>，TiDB 均支持 ACID 分布式事务。</p>
<p>TiDB 事务模型灵感源自 Google Percolator 模型，主体是一个两阶段提交协议，并进行了一些实用的优化。该模型依赖于一个时间戳分配器，为每个事务分配单调递增的时间戳，这样就检测到事务冲突。在 TiDB 集群中，<a href="/docs-cn/dev/architecture#pd-server">PD</a> 承担时间戳分配器的角色。</p>
<h4 id="1110-tidb-">1.1.10 TiDB 支持哪些编程语言？</h4>
<p>只要支持 MySQL Client/Driver 的编程语言，都可以直接使用 TiDB。</p>
<h4 id="1111-tidb-">1.1.11 TiDB 是否支持其他存储引擎？</h4>
<p>是的，除了 TiKV 之外，TiDB 还支持一些流行的单机存储引擎，比如 GolevelDB、RocksDB、BoltDB 等。如果一个存储引擎是支持事务的 KV 引擎，并且能提供一个满足 TiDB 接口要求的 Client，即可接入 TiDB。</p>
<h4 id="1112-">1.1.12 官方有没有三中心跨机房多活部署的推荐方案？</h4>
<p>从 TiDB 架构来讲，支持真正意义上的跨中心异地多活，从操作层面讲，依赖数据中心之间的网络延迟和稳定性，一般建议延迟在 5ms 以下，目前我们已经有相似客户方案，具体请咨询官方 <a href="mailto:info@pingcap.com">info@pingcap.com</a>。</p>
<h4 id="1113--tidb-">1.1.13 除了官方文档，有没有其他 TiDB 知识获取途径？</h4>
<p>目前<a href="/docs-cn/dev/overview#tidb-%E7%AE%80%E4%BB%8B">官方文档</a>是获取 TiDB 相关知识最主要、最及时的发布途径。除此之外，我们也有一些技术沟通群，如有需求可发邮件至 <a href="mailto:info@pingcap.com">info@pingcap.com</a> 获取。</p>
<h4 id="1114-tidb--mysql-variables-">1.1.14 TiDB 对哪些 MySQL variables 兼容？</h4>
<p>详细可参考<a href="/docs-cn/dev/reference/configuration/tidb-server/mysql-variables">系统变量</a>。</p>
<h4 id="1115-tidb--select-for-update">1.1.15 TiDB 是否支持 select for update？</h4>
<p>支持，但语义上和 MySQL 有区别，TiDB 是分布式数据库，采用的乐观锁机制，也就说 select for update 不在事务开启就锁住数据，而是其他事务在提交的时候进行冲突检查，如有冲突，会进行回滚。</p>
<h4 id="1116-tidb--codec--utf8--memcomparable--key--utf8">1.1.16 TiDB 的 codec 能保证 UTF8 的字符串是 memcomparable 的吗？我们的 key 需要支持 UTF8，有什么编码建议吗？</h4>
<p>TiDB 字符集默认就是 UTF8 而且目前只支持 UTF8，字符串就是 memcomparable 格式的。</p>
<h4 id="1117-tidb-">1.1.17 TiDB 用户名长度限制？</h4>
<p>在 TiDB 中用户名最长为 32 字符。</p>
<h4 id="1118-tidb--xa">1.1.18 TiDB 是否支持 XA？</h4>
<p>虽然 TiDB 的 JDBC 驱动用的就是 MySQL JDBC（Connector / J），但是当使用 Atomikos 的时候，数据源要配置成类似这样的配置：<code>type="com.mysql.jdbc.jdbc2.optional.MysqlXADataSource"</code>。MySQL JDBC XADataSource 连接 TiDB 的模式目前是不支持的。MySQL JDBC 中配置好的 XADataSource 模式，只对 MySQL 数据库起作用（DML 去修改 redo 等）。</p>
<p>Atomikos 配好两个数据源后，JDBC 驱动都要设置成 XA 模式，然后 Atomikos 在操作 TM 和 RM（DB）的时候，会通过数据源的配置，发起带有 XA 指令到 JDBC 层，JDBC 层 XA 模式启用的情况下，会对 InnoDB（如果是 MySQL 的话）下发操作一连串 XA 逻辑的动作，包括 DML 去变更 redo log 等，就是两阶段递交的那些操作。TiDB 目前的引擎版本中，没有对上层应用层 JTA / XA 的支持，不解析这些 Atomikos 发过来的 XA 类型的操作。</p>
<p>MySQL 是单机数据库，只能通过 XA 来满足跨数据库事务，而 TiDB 本身就通过 Google 的 Percolator 事务模型支持分布式事务，性能稳定性比 XA 要高出很多，所以不会也不需要支持 XA。</p>
<h4 id="1119-show-processlist-">1.1.19 show processlist 是否显示系统进程号？</h4>
<p>TiDB 的 <code>show processlist</code> 与 MySQL 的 <code>show processlist</code> 显示内容基本一样，不会显示系统进程号，而 ID 表示当前的 session ID。其中 TiDB 的 <code>show processlist</code> 和 MySQL 的 <code>show processlist</code> 区别如下：</p>
<p>1）由于 TiDB 是分布式数据库，tidb-server 实例是无状态的 SQL 解析和执行引擎（详情可参考 <a href="/docs-cn/dev/overview#tidb-%E6%95%B4%E4%BD%93%E6%9E%B6%E6%9E%84">TiDB 整体架构</a>），用户使用 MySQL 客户端登录的是哪个 tidb-server，<code>show processlist</code> 就会显示当前连接的这个 tidb-server 中执行的 session 列表，不是整个集群中运行的全部 session 列表；而 MySQL 是单机数据库，<code>show processlist</code> 列出的是当前整个 MySQL 数据库的全部执行 SQL 列表。</p>
<p>2）TiDB 的 <code>show processlist</code> 显示内容比起 MySQL 来讲，多了一个当前 session 使用内存的估算值（单位 Byte）。</p>
<h4 id="1120-">1.1.20 如何修改用户名密码和权限？</h4>
<p>TiDB 作为分布式数据库，在 TiDB 中修改用户密码建议使用 <code>set password for 'root'@'%' = '0101001';</code> 或 <code>alter</code> 方法，不推荐使用 <code>update mysql.user</code> 的方法进行，这种方法可能会造成其它节点刷新不及时的情况。修改权限也一样，都建议采用官方的标准语法。详情可参考 <a href="/docs-cn/dev/reference/security/user-account-management">TiDB 用户账户管理</a>。</p>
<h4 id="1121-tidb--id-">1.1.21 TiDB 中，为什么出现后插入数据的自增 ID 反而小？</h4>
<p>TiDB 的自增 ID (<code>AUTO_INCREMENT</code>) 只保证自增且唯一，并不保证连续分配。TiDB 目前采用批量分配的方式，所以如果在多台 TiDB 上同时插入数据，分配的自增 ID 会不连续。当多个线程并发往不同的 tidb-server 插入数据的时候，有可能会出现后插入的数据自增 ID 小的情况。此外，TiDB允许给整型类型的字段指定 AUTO_INCREMENT，且一个表只允许一个属性为 <code>AUTO_INCREMENT</code> 的字段。详情可参考<a href="/docs-cn/dev/reference/mysql-compatibility#%E8%87%AA%E5%A2%9E-id">CREATE TABLE 语法</a>。</p>
<h4 id="1122-sql-mode--set-">1.1.22 sql_mode 默认除了通过命令 set 修改，配置文件怎么修改？</h4>
<p>TiDB 的 sql_mode 与 MySQL 的 sql_mode 设置方法有一些差别，TiDB 不支持配置文件配置设置数据库的 sql_mode，而只能使用 set 命令去设置，具体方法为：<code>set @@global.sql_mode = 'STRICT_TRANS_TABLES';</code>。</p>
<h4 id="1123-tidb-">1.1.23 TiDB 支持哪些认证协议，过程是怎样的？</h4>
<p>这一层跟 MySQL 一样，走的 SASL 认证协议，用于用户登录认证，对密码的处理流程。</p>
<p>客户端连接 TiDB 的时候，走的是 challenge-response（挑战-应答）的认证模式，过程如下：</p>
<p>第一步：客户端连接服务器；</p>
<p>第二步：服务器发送随机字符串 challenge 给客户端；</p>
<p>第三步：客户端发送 username + response 给服务器；</p>
<p>第四步：服务器验证 response。</p>
<h3 id="12-tidb-">1.2 TiDB 原理</h3>
<h4 id="121--tikv">1.2.1 存储 TiKV</h4>
<h5 id="1211-tikv-">1.2.1.1 TiKV 详细解读</h5>
<p><a href="http://t.cn/RTKRRWv">三篇文章了解 TiDB 技术内幕 - 说存储</a></p>
<h4 id="122--tidb">1.2.2 计算 TiDB</h4>
<h5 id="1221-tidb-">1.2.2.1 TiDB 详细解读</h5>
<p><a href="http://t.cn/RTKRkBh">三篇文章了解 TiDB 技术内幕 - 说计算</a></p>
<h4 id="123--pd">1.2.3 调度 PD</h4>
<h5 id="1231-pd-">1.2.3.1 PD 详细解读</h5>
<p><a href="http://t.cn/RTKEZ0U">三篇文章了解 TiDB 技术内幕 - 谈调度</a></p>
<h2 id="heading">二、安装部署升级</h2>
<h3 id="21-">2.1 环境准备</h3>
<h4 id="211-">2.1.1 操作系统版本要求</h4>
<table>
<thead>
<tr>
<th><strong>Linux 操作系统平台</strong></th>
<th><strong>版本</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>Red Hat Enterprise Linux</td>
<td>7.3 及以上</td>
</tr>
<tr>
<td>CentOS</td>
<td>7.3 及以上</td>
</tr>
<tr>
<td>Oracle Enterprise Linux</td>
<td>7.3 及以上</td>
</tr>
</tbody>
</table>
<h5 id="2111---centos-7--tidb-">2.1.1.1  为什么要在 CentOS 7 上部署 TiDB 集群？</h5>
<p>TiDB 作为一款开源分布式 NewSQL 数据库，可以很好的部署和运行在 Intel 架构服务器环境及主流虚拟化环境，并支持绝大多数的主流硬件网络，作为一款高性能数据库系统，TiDB 支持主流的 Linux 操作系统环境，具体可以参考 TiDB 的<a href="/docs-cn/dev/how-to/deploy/hardware-recommendations">官方部署要求</a>。其中 TiDB 在 CentOS 7.3 的环境下进行大量的测试，同时也有很多这个操作系统的部署最佳实践，因此，我们推荐客户在部署 TiDB 的时候使用 CentOS 7.3+ 以上的Linux 操作系统。</p>
<h4 id="212-">2.1.2 硬件要求</h4>
<p>TiDB 支持部署和运行在 Intel x86-64 架构的 64 位通用硬件服务器平台。对于开发，测试，及生产环境的服务器硬件配置有以下要求和建议：</p>
<h5 id="2121-">2.1.2.1 开发及测试环境</h5>
<table>
<thead>
<tr>
<th><strong>组件</strong></th>
<th><strong>CPU</strong></th>
<th><strong>内存</strong></th>
<th><strong>本地存储</strong></th>
<th><strong>网络</strong></th>
<th><strong>实例数量(最低要求)</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>TiDB</td>
<td>8核+</td>
<td>16 GB+</td>
<td>SAS, 200 GB+</td>
<td>千兆网卡</td>
<td>1（可与 PD 同机器）</td>
</tr>
<tr>
<td>PD</td>
<td>8核+</td>
<td>16 GB+</td>
<td>SAS, 200 GB+</td>
<td>千兆网卡</td>
<td>1（可与 TiDB 同机器）</td>
</tr>
<tr>
<td>TiKV</td>
<td>8核+</td>
<td>32 GB+</td>
<td>SSD, 200 GB+</td>
<td>千兆网卡</td>
<td>3</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td>服务器总计</td>
<td>4</td>
</tr>
</tbody>
</table>
<h5 id="2122-">2.1.2.2 线上环境</h5>
<table>
<thead>
<tr>
<th><strong>组件</strong></th>
<th><strong>CPU</strong></th>
<th><strong>内存</strong></th>
<th><strong>硬盘类型</strong></th>
<th><strong>网络</strong></th>
<th><strong>实例数量(最低要求)</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>TiDB</td>
<td>16核+</td>
<td>48 GB+</td>
<td>SAS</td>
<td>万兆网卡（2块最佳）</td>
<td>2</td>
</tr>
<tr>
<td>PD</td>
<td>8核+</td>
<td>16 GB+</td>
<td>SSD</td>
<td>万兆网卡（2块最佳）</td>
<td>3</td>
</tr>
<tr>
<td>TiKV</td>
<td>16核+</td>
<td>48 GB+</td>
<td>SSD</td>
<td>万兆网卡（2块最佳）</td>
<td>3</td>
</tr>
<tr>
<td>监控</td>
<td>8核+</td>
<td>16 GB+</td>
<td>SAS</td>
<td>千兆网卡</td>
<td>1</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td>服务器总计</td>
<td>9</td>
</tr>
</tbody>
</table>
<h5 id="2123-2-">2.1.2.3 2 块网卡的目的是？万兆的目的是？</h5>
<p>作为一个分布式集群，TiDB 对时间的要求还是比较高的，尤其是 PD 需要分发唯一的时间戳，如果 PD 时间不统一，如果有 PD 切换，将会等待更长的时间。2 块网卡可以做 bond，保证数据传输的稳定，万兆可以保证数据传输的速度，千兆网卡容易出现瓶颈，我们强烈建议使用万兆网卡。</p>
<h5 id="2124-ssd--raid-">2.1.2.4 SSD 不做 RAID 是否可行？</h5>
<p>资源可接受的话，我们建议做 RAID 10，如果资源有限，也可以不做 RAID。</p>
<h5 id="2125-tidb-">2.1.2.5 TiDB 集群各个组件的配置推荐？</h5>
<ul>
<li>TiDB 需要 CPU 和内存比较好的机器，参考官网配置要求，如果后期需要开启 Binlog，根据业务量的评估和 GC 时间的要求，也需要本地磁盘大一点，不要求 SSD 磁盘；</li>
<li>PD 里面存了集群元信息，会有频繁的读写请求，对磁盘 I/O 要求相对比较高，磁盘太差会影响整个集群性能，推荐 SSD 磁盘，空间不用太大。另外集群 Region 数量越多对 CPU、内存的要求越高；</li>
<li>TiKV 对 CPU、内存、磁盘要求都比较高，一定要用 SSD 磁盘。</li>
</ul>
<p>详情可参考 <a href="/docs-cn/dev/how-to/deploy/hardware-recommendations">TiDB 软硬件环境需求</a>。</p>
<h3 id="22-">2.2 安装部署</h3>
<h4 id="221-ansible-">2.2.1 Ansible 部署方式（强烈推荐）</h4>
<p>详细可参考<a href="/docs-cn/dev/how-to/deploy/orchestrated/ansible">使用 TiDB Ansible 部署 TiDB 集群</a>。</p>
<h5 id="2211--tikvpd--toml-">2.2.1.1 为什么修改了 TiKV/PD 的 toml 配置文件，却没有生效？</h5>
<p>这种情况一般是因为没有使用 <code>--config</code> 参数来指定配置文件（目前只会出现在 binary 部署的场景），TiKV/PD 会按默认值来设置。如果要使用配置文件，请设置 TiKV/PD 的 <code>--config</code> 参数。对于 TiKV 组件，修改配置后重启服务即可；对于 PD 组件，只会在第一次启动时读取配置文件，之后可以使用 pd-ctl 的方式来修改配置，详情可参考 <a href="/docs-cn/dev/reference/configuration/pd-server/configuration">PD 配置参数</a>。</p>
<h5 id="2212-tidb--prometheus--grafana-">2.2.1.2 TiDB 监控框架 Prometheus + Grafana 监控机器建议单独还是多台部署？</h5>
<p>监控机建议单独部署。建议 CPU 8 core，内存 16 GB 以上，硬盘 500 GB 以上。</p>
<h5 id="2213-">2.2.1.3 有一部分监控信息显示不出来？</h5>
<p>查看访问监控的机器时间跟集群内机器的时间差，如果比较大，更正时间后即可显示正常。</p>
<h5 id="2214-supervisesvcsvstat-">2.2.1.4 supervise/svc/svstat 服务具体起什么作用？</h5>
<ul>
<li>supervise 守护进程</li>
<li>svc 启停服务</li>
<li>svstat 查看进程状态</li>
</ul>
<h5 id="2215-inventoryini-">2.2.1.5 inventory.ini 变量参数解读</h5>
<table>
<thead>
<tr>
<th><strong>变量</strong></th>
<th><strong>含义</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>cluster_name</td>
<td>集群名称，可调整</td>
</tr>
<tr>
<td>tidb_version</td>
<td>TiDB 版本，TiDB Ansible 各分支默认已配置</td>
</tr>
<tr>
<td>deployment_method</td>
<td>部署方式，默认为 binary，可选 docker</td>
</tr>
<tr>
<td>process_supervision</td>
<td>进程监管方式，默认为 systemd，可选 supervise</td>
</tr>
<tr>
<td>timezone</td>
<td>修改部署目标机器时区，默认为 Asia/Shanghai, 可调整，与set_timezone 变量结合使用</td>
</tr>
<tr>
<td>set_timezone</td>
<td>默认为 True，即修改部署目标机器时区，关闭可修改为 False</td>
</tr>
<tr>
<td>enable_elk</td>
<td>目前不支持，请忽略</td>
</tr>
<tr>
<td>enable_firewalld</td>
<td>开启防火墙，默认不开启</td>
</tr>
<tr>
<td>enable_ntpd</td>
<td>检测部署目标机器 NTP 服务，默认为 True，请勿关闭</td>
</tr>
<tr>
<td>machine_benchmark</td>
<td>检测部署目标机器磁盘 IOPS，默认为 True，请勿关闭</td>
</tr>
<tr>
<td>set_hostname</td>
<td>根据 IP 修改部署目标机器主机名，默认为 False</td>
</tr>
<tr>
<td>enable_binlog</td>
<td>是否部署 pump 并开启 binlog，默认为 False，依赖 Kafka 集群，参见 zookeeper_addrs 变量</td>
</tr>
<tr>
<td>zookeeper_addrs</td>
<td>binlog Kafka 集群的 zookeeper 地址</td>
</tr>
<tr>
<td>enable_slow_query_log</td>
<td>TiDB 慢查询日志记录到单独文件({{ deploy_dir }}/log/tidb_slow_query.log)，默认为 False，记录到 tidb 日志</td>
</tr>
<tr>
<td>deploy_without_tidb</td>
<td>KV 模式，不部署 TiDB 服务，仅部署 PD、TiKV 及监控服务，请将 inventory.ini 文件中 tidb_servers 主机组 IP 设置为空。</td>
</tr>
</tbody>
</table>
<h4 id="222-tidb--ansible-">2.2.2 TiDB 离线 Ansible 部署方案</h4>
<p>首先这不是我们建议的方式，如果中控机没有外网，也可以通过离线 Ansible 部署方式，详情可参考<a href="/docs-cn/dev/how-to/deploy/orchestrated/offline-ansible">离线 TiDB Ansible 部署方案</a>。</p>
<h4 id="223-docker-compose-">2.2.3 Docker Compose 快速构建集群（单机部署）</h4>
<p>使用 docker-compose 在本地一键拉起一个集群，包括集群监控，还可以根据需求自定义各个组件的软件版本和实例个数，以及自定义配置文件，这种只限于开发环境，详细可参考<a href="/docs-cn/dev/how-to/get-started/deploy-tidb-from-docker-compose">官方文档</a>。</p>
<h4 id="224--tidb--sql">2.2.4 如何单独记录 TiDB 中的慢查询日志，如何定位慢查询 SQL？</h4>
<p>1）TiDB 中，对慢查询的定义在 tidb-ansible 的 <code>conf/tidb.yml</code> 配置文件中，<code>slow-threshold: 300</code>，这个参数是配置慢查询记录阈值的，单位是 ms。</p>
<p>慢查询日志默认记录到 tidb.log 中，如果希望生成单独的慢查询日志文件，修改 inventory.ini 配置文件的参数 <code>enable_slow_query_log</code> 为 True。</p>
<p>如上配置修改之后，需要执行 <code>ansible-playbook rolling_update.yml --tags=tidb</code>，对 tidb-server 实例进行滚动升级，升级完成后，tidb-server 将在 <code>tidb_slow_query.log</code>
文件中记录慢查询日志。</p>
<p>2）如果出现了慢查询，可以从 Grafana 监控定位到出现慢查询的 tidb-server 以及时间点，然后在对应节点查找日志中记录的 SQL 信息。</p>
<p>3）除了日志，还可以通过 <code>admin show slow</code> 命令查看，详情可参考 <a href="/docs-cn/dev/how-to/maintain/identify-abnormal-queries/identify-slow-queries#admin-show-slow-%E5%91%BD%E4%BB%A4"><code>admin show slow</code> 命令</a>。</p>
<h4 id="225--tidb--tikv--label--label">2.2.5 首次部署 TiDB 集群时，没有配置 tikv 的 Label 信息，在后续如何添加配置 Label？</h4>
<p>TiDB 的 Label 设置是与集群的部署架构相关的，是集群部署中的重要内容，是 PD 进行全局管理和调度的依据。如果集群在初期部署过程中没有设置 Label，需要在后期对部署结构进行调整，就需要手动通过 PD 的管理工具 pd-ctl 来添加 location-labels 信息，例如：<code>config set location-labels "zone,rack,host"</code>（根据实际的 label 层级名字配置）。</p>
<p>pd-ctl 的使用参考 <a href="/docs-cn/dev/reference/tools/pd-control">PD Control 使用说明</a>。</p>
<h4 id="226--dd--oflagdirect-">2.2.6 为什么测试磁盘的 dd 命令用 oflag=direct 这个选项？</h4>
<p>Direct 模式就是把写入请求直接封装成 I/O 指令发到磁盘，这样是为了绕开文件系统的缓存，可以直接测试磁盘的真实的 I/O 读写能力。</p>
<h4 id="227--fio--tikv-">2.2.7 如何用 fio 命令测试 TiKV 实例的磁盘性能？</h4>
<ul>
<li>
<p>随机读测试：</p>
<div class="copyable-code-block shell-regular">
</div>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">./fio -ioengine<span style="color:#f92672">=</span>psync -bs<span style="color:#f92672">=</span>32k -fdatasync<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span> -thread -rw<span style="color:#f92672">=</span>randread -size<span style="color:#f92672">=</span>10G -filename<span style="color:#f92672">=</span>fio_randread_test.txt -name<span style="color:#f92672">=</span><span style="color:#e6db74">'fio randread test'</span> -iodepth<span style="color:#f92672">=</span><span style="color:#ae81ff">4</span> -runtime<span style="color:#f92672">=</span><span style="color:#ae81ff">60</span> -numjobs<span style="color:#f92672">=</span><span style="color:#ae81ff">4</span> -group_reporting --output-format<span style="color:#f92672">=</span>json --output<span style="color:#f92672">=</span>fio_randread_result.json
</code></pre></div></li>
<li>
<p>顺序写和随机读混合测试：</p>
<div class="copyable-code-block shell-regular">
</div>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">./fio -ioengine<span style="color:#f92672">=</span>psync -bs<span style="color:#f92672">=</span>32k -fdatasync<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span> -thread -rw<span style="color:#f92672">=</span>randrw -percentage_random<span style="color:#f92672">=</span>100,0 -size<span style="color:#f92672">=</span>10G -filename<span style="color:#f92672">=</span>fio_randread_write_test.txt -name<span style="color:#f92672">=</span><span style="color:#e6db74">'fio mixed randread and sequential write test'</span> -iodepth<span style="color:#f92672">=</span><span style="color:#ae81ff">4</span> -runtime<span style="color:#f92672">=</span><span style="color:#ae81ff">60</span> -numjobs<span style="color:#f92672">=</span><span style="color:#ae81ff">4</span> -group_reporting --output-format<span style="color:#f92672">=</span>json --output<span style="color:#f92672">=</span>fio_randread_write_test.json
</code></pre></div></li>
</ul>
<h4 id="228--tidb-ansible--tidb--unreachable-msg-failed-to-connect-to-the-host-via-ssh--">2.2.8 使用 TiDB Ansible 部署 TiDB 集群的时候，遇到 <code>UNREACHABLE! "msg": "Failed to connect to the host via ssh: "</code> 报错是什么原因？</h4>
<p>有两种可能性：</p>
<ul>
<li>
<p>ssh 互信的准备工作未做好，建议严格参照我们的<a href="/docs-cn/dev/how-to/deploy/orchestrated/ansible">官方文档步骤</a>配置互信，并使用命令 <code>ansible -i inventory.ini all -m shell -a 'whoami' -b</code> 来验证互信配置是否成功。</p>
</li>
<li>
<p>如果涉及到单服务器分配了多角色的场景，例如多组件混合部署或单台服务器部署了多个 TiKV 实例，可能是由于 ssh 复用的机制引起这个报错，可以使用 <code>ansible … -f 1</code> 的选项来规避这个报错。</p>
</li>
</ul>
<h3 id="23-">2.3 升级</h3>
<h4 id="231--ansible-">2.3.1 如何使用 Ansible 滚动升级？</h4>
<p>滚动升级 TiKV 节点( 只升级单独服务 )</p>
<p><code>ansible-playbook rolling_update.yml --tags=tikv</code></p>
<p>滚动升级所有服务</p>
<p><code>ansible-playbook rolling_update.yml</code></p>
<h4 id="232-">2.3.2 滚动升级有那些影响?</h4>
<p>滚动升级 TiDB 服务，滚动升级期间不影响业务运行，需要配置最小集群拓扑（TiDB * 2、PD * 3、TiKV * 3），如果集群环境中有 Pump/Drainer 服务，建议先停止 Drainer 后滚动升级（升级 TiDB 时会升级 Pump）。</p>
<h4 id="233-binary-">2.3.3 Binary 如何升级？</h4>
<p>Binary 不是我们建议的安装方式，对升级支持也不友好，建议换成 Ansible 部署。</p>
<h4 id="234--tikv-">2.3.4 一般升级选择升级 TiKV 还是所有组件都升级？</h4>
<p>常规需要一起升，因为整个版本都是一起测试的，单独升级只限当发生一个紧急故障时，需要单独对一个有问题的角色做升级。</p>
<h4 id="235--timeout-when-waiting-for-search-string-200-ok-">2.3.5 启动集群或者升级集群过程中出现 “Timeout when waiting for search string 200 OK” 是什么原因？如何处理？</h4>
<p>可能有以下几种原因：进程没有正常启动；端口被占用；进程没有正常停掉；停掉集群的情况下使用 rolling_update.yml 来升级集群（操作错误）。</p>
<p>处理方式：登录到相应节点查看进程或者端口的状态；纠正错误的操作步骤。</p>
<h2 id="heading-1">三、集群管理</h2>
<h3 id="31-">3.1 集群日常管理</h3>
<h4 id="311-ansible-">3.1.1 Ansible 常见运维操作有那些？</h4>
<table>
<thead>
<tr>
<th><strong>任务</strong></th>
<th><strong>Playbook</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>启动集群</td>
<td>ansible-playbook start.yml</td>
</tr>
<tr>
<td>停止集群</td>
<td>ansible-playbook stop.yml</td>
</tr>
<tr>
<td>销毁集群</td>
<td>ansible-playbook unsafe_cleanup.yml (若部署目录为挂载点，会报错，可忽略）</td>
</tr>
<tr>
<td>清除数据(测试用)</td>
<td>ansible-playbook cleanup_data.yml</td>
</tr>
<tr>
<td>滚动升级</td>
<td>ansible-playbook rolling_update.yml</td>
</tr>
<tr>
<td>滚动升级 TiKV</td>
<td>ansible-playbook rolling_update.yml –tags=tikv</td>
</tr>
<tr>
<td>滚动升级除 PD 外模块</td>
<td>ansible-playbook rolling_update.yml –skip-tags=pd</td>
</tr>
<tr>
<td>滚动升级监控组件</td>
<td>ansible-playbook rolling_update_monitor.yml</td>
</tr>
</tbody>
</table>
<h4 id="312-tidb-">3.1.2 TiDB 如何登录？</h4>
<p>和 MySQL 登录方式一样，可以按照下面例子进行登录。</p>
<p><code>mysql -h 127.0.0.1 -uroot -P4000</code></p>
<h4 id="313-tidb-">3.1.3 TiDB 如何修改数据库系统变量？</h4>
<p>和 MySQL 一样，TiDB 也分为静态参数和固态参数，静态参数可以直接通过<code>set global xxx = n</code>的方式进行修改，不过新参数值只限于该实例生命周期有效。</p>
<h4 id="314-tidb-tikv-">3.1.4 TiDB (TiKV) 有哪些数据目录？</h4>
<p>默认在 <a href="/docs-cn/dev/reference/configuration/tikv-server/configuration#--data-dir"><code>--data-dir</code></a> 目录下，其中包括 backup、db、raft、snap 四个目录，分别存储备份、数据、raft 数据及镜像数据。</p>
<h4 id="315-tidb-">3.1.5 TiDB 有哪些系统表？</h4>
<p>和 MySQL 类似，TiDB 中也有系统表，用于存放数据库运行时所需信息，具体信息参考 <a href="/docs-cn/dev/reference/system-databases/mysql">TiDB 系统数据库</a>文档。</p>
<h4 id="316-tidb-">3.1.6 TiDB 各节点服务器下是否有日志文件，如何管理？</h4>
<p>默认情况下各节点服务器会在日志中输出标准错误，如果启动的时候通过 <code>--log-file</code> 参数指定了日志文件，那么日志会输出到指定的文件中，并且按天做 rotation。</p>
<h4 id="317--tidb">3.1.7 如何规范停止 TiDB？</h4>
<p>如果是用 Ansible 部署的，可以使用 <code>ansible-playbook stop.yml</code> 命令停止 TiDB 集群。如果不是 Ansible 部署的，可以直接 kill 掉所有服务。如果使用 kill 命令，TiDB 的组件会做 graceful 的 shutdown。</p>
<h4 id="318-tidb--kill-">3.1.8 TiDB 里面可以执行 kill 命令吗？</h4>
<ul>
<li>可以 kill DML 语句，首先使用 <code>show processlist</code>，找到对应 session 的 id，然后执行 <code>kill tidb [session id]</code>。</li>
<li>可以 kill DDL 语句，首先使用 <code>admin show ddl jobs</code>，查找需要 kill 的 DDL job ID，然后执行 <code>admin cancel ddl jobs 'job_id' [, 'job_id'] ...</code>。具体可以参考 <a href="/docs-cn/dev/reference/sql/statements/admin">admin 操作</a>。</li>
</ul>
<h4 id="319-tidb-">3.1.9 TiDB 是否支持会话超时？</h4>
<p>TiDB 暂不支持数据库层面的会话超时，目前想要实现超时，在没 LB（Load Balancing）的时候，需要应用侧记录发起的 Session 的 ID，通过应用自定义超时，超时以后需要到发起 Query 的节点上用 <code>kill tidb [session id]</code> 来杀掉 SQL。目前建议使用应用程序来实现会话超时，当达到超时时间，应用层就会抛出异常继续执行后续的程序段。</p>
<h4 id="3110-tidb-">3.1.10 TiDB 生产环境的版本管理策略是怎么样的？如何尽可能避免频繁升级？</h4>
<p>TiDB 版本目前逐步标准化，每次 Release 都包含详细的 Change log，版本功能<a href="https://github.com/pingcap/TiDB/releases">变化详情</a>，生产环境是否有必要升级取决于业务系统，建议升级之前详细了解前后版本的功能差异。</p>
<p>版本号说明参考：Release Version: <code>v1.0.3-1-ga80e796</code></p>
<ul>
<li><code>v1.0.3</code> 表示 GA 标准版</li>
<li><code>1</code> 表示该版本 commit 1 次</li>
<li><code>ga80e796</code> 代表版本的 <code>git-hash</code></li>
</ul>
<h4 id="3111--tidb-master--tidb-ansible-">3.1.11 分不清 TiDB master 版本之间的区别，经常用错 TiDB Ansible 版本?</h4>
<p>TiDB 目前社区非常活跃，在 1.0 GA 版本发布后，还在不断的优化和修改 BUG，因此 TiDB 的版本更新周期比较快，会不定期有新版本发布，请关注我们的<a href="https://pingcap.com/weekly/">新版本发布官方网站</a>。此外 TiDB 安装推荐使用 TiDB Ansible 进行安装，TiDB Ansible 的版本也会随着 TiDB 的版本发布进行更新，因此建议用户在安装升级新版本的时候使用最新的 TiDB Ansible 安装包版本进行安装。此外，在 TiDB 1.0 GA 版本后，对 TiDB 的版本号进行了统一管理，TiDB 的版本可以通过以下两种方式进行查看：</p>
<ul>
<li>通过 <code>select tidb_version()</code> 进行查看</li>
<li>通过执行 <code>tidb-server -V</code> 进行查看</li>
</ul>
<h4 id="3112--tidb-">3.1.12 有没有图形化部署 TiDB 的工具？</h4>
<p>暂时没有。</p>
<h4 id="3113-tidb-">3.1.13 TiDB 如何进行水平扩展？</h4>
<p>当您的业务不断增长时，数据库可能会面临三方面瓶颈，第一是存储空间，第二是计算资源，第三是读写容量，这时可以对 TiDB 集群做水平扩展。</p>
<ul>
<li>如果是存储资源不够，可以通过添加 TiKV Server 节点来解决，新节点启动后，PD 会自动将其他节点的部分数据迁移过去，无需人工介入。</li>
<li>如果是计算资源不够，可以查看 TiDB Server 和 TiKV Server 节点的 CPU 消耗情况，再考虑添加 TiDB Server 节点或者是 TiKV Server 节点来解决，如添加 TiDB Server 节点，将其添加到前端 Load Balancer 配置之中即可。</li>
<li>如果是容量跟不上，一般可以考虑同时增加 TiDB Server 和 TiKV Server 节点。</li>
</ul>
<h4 id="3114-percolator-crash--release">3.1.14 Percolator 用了分布式锁，crash 的客户端会保持锁，会造成锁没有 release？</h4>
<p>详细可参考 <a href="https://pingcap.com/blog-cn/percolator-and-txn/">Percolator 和 TiDB 事务算法</a>。</p>
<h4 id="3115-tidb--grpc--thrift-google-">3.1.15 TiDB 为什么选用 gRPC 而不选用 Thrift，是因为 Google 在用吗？</h4>
<p>不只是因为 Google 在用，有一些比较好的特性我们需要，比如流控、加密还有 Streaming。</p>
<h4 id="3116-likebindocustomersname-jason-92-92">3.1.16 like(bindo.customers.name, jason%, 92) 这个92代表什么？</h4>
<p>那个是转义字符，默认是 (ASCII 92)。</p>
<h4 id="3117--information-schematablesdata-length--tikv--store-size-">3.1.17 为什么 <code>information_schema.tables.data_length</code> 记录的大小和 TiKV 监控面板上的 store size 不一样？</h4>
<p>这是因为两者计算的角度不一样。<code>information_schema.tables.data_length</code> 是通过统计信息（平均每行的大小）得到的估算值。TiKV 监控面板上的 store size 是单个 TiKV 实例的数据文件（RocksDB 的 SST 文件）的大小总和。由于多版本和 TiKV 会压缩数据，所以两者显示的大小不一样。</p>
<h3 id="32-pd-">3.2 PD 管理</h3>
<h4 id="321--pd-tikv-cluster-is-not-bootstrapped">3.2.1 访问 PD 报错：TiKV cluster is not bootstrapped</h4>
<p>PD 的大部分 API 需要在初始化 TiKV 集群以后才能使用，如果在部署新集群的时候只启动了 PD，还没有启动 TiKV，这时候访问 PD 就会报这个错误。遇到这个错误应该先把要部署的 TiKV 启动起来，TiKV 会自动完成初始化工作，然后就可以正常访问 PD。</p>
<h4 id="322-pd-etcd-cluster-id-mismatch">3.2.2 PD 启动报错：etcd cluster ID mismatch</h4>
<p>PD 启动参数中的 <code>--initial-cluster</code> 包含了某个不属于该集群的成员。遇到这个错误时请检查各个成员的所属集群，剔除错误的成员后即可正常启动。</p>
<h4 id="323-pd-">3.2.3 PD 能容忍的时间同步误差是多少？</h4>
<p>理论上，时间同步误差越小越好。PD 可容忍任意时长的误差，但是，时间同步误差越大意味着 PD 分配的时间戳与真实的物理时间相差越大，这个差距会影响读历史版本等功能。</p>
<h4 id="324-client--pd-">3.2.4 Client 连接是如何寻找 PD 的？</h4>
<p>Client 连接只能通过 TiDB 访问集群，TiDB 负责连接 PD 与 TiKV，PD 与 TiKV 对 Client 透明。当 TiDB 连接任意一台 PD 的时候，PD 会告知 TiDB 当前的 leader 是谁，如果此台 PD 不是 leader，TiDB 将会重新连接至 leader PD。</p>
<h4 id="325-pd--leader-schedule-limit--region-schedule-limit-">3.2.5 PD 参数中 leader-schedule-limit 和 region-schedule-limit 调度有什么区别？</h4>
<ul>
<li>leader-schedule-limit 调度是用来均衡不同 TiKV 的 leader 数，影响处理查询的负载。</li>
<li>region-schedule-limit 调度是均衡不同 TiKV 的副本数，影响不同节点的数据量。</li>
</ul>
<h4 id="326--region--replica-">3.2.6 每个 region 的 replica 数量可配置吗？调整的方法是？</h4>
<p>可以，目前只能调整全局的 replica 数量。首次启动时 PD 会读配置文件（conf/pd.yml），使用其中的 max-replicas 配置，之后修改需要使用 pd-ctl 配置命令 <code>config set max-replicas $num</code>，配置后可通过 <code>config show all</code> 来查看已生效的配置。调整的时候，不会影响业务，会在后台添加，注意总 TiKV 实例数总是要大于等于设置的副本数，例如 3 副本需要至少 3 个 TiKV。增加副本数量之前需要预估额外的存储需求。pd-ctl 的详细用法可参考 <a href="/docs-cn/dev/reference/tools/pd-control">PD Control 使用说明</a>。</p>
<h4 id="327-">3.2.7 缺少命令行集群管理工具，整个集群的健康度当前是否正常，不好确认？</h4>
<p>可以通过 pd-ctl 等工具来判断集群大概的状态，详细的集群状态还是需要通过监控来确认。</p>
<h4 id="328-">3.2.8 集群下线节点后，怎么删除老集群节点监控信息？</h4>
<p>下线节点一般指 TiKV 节点通过 pd-ctl 或者监控判断节点是否下线完成。节点下线完成后，手动停止下线节点上相关的服务。从 Prometheus 配置文件中删除对应节点的 node_exporter 信息。从 Ansible inventory.ini 中删除对应节点的信息。</p>
<h4 id="329--pd-control--pd-server--ip--127001-">3.2.9 使用 PD Control 连接 PD Server 时，为什么只能通过本机 IP 连接，不能通过 127.0.0.1 连接？</h4>
<p>因为使用 TiDB Ansible 部署的集群，PD 对外服务端口不会绑定到 127.0.0.1，所以 PD Control 不会识别 127.0.0.1。</p>
<h3 id="33-tidb-server-">3.3 TiDB server 管理</h3>
<h4 id="331-tidb--lease-">3.3.1 TiDB 的 lease 参数应该如何设置？</h4>
<p>启动 TiDB Server 时，需要通过命令行参数设置 lease 参数（–lease=60），其值会影响 DDL 的速度（只会影响当前执行 DDL 的 session，其他的 session 不会受影响）。在测试阶段，lease 的值可以设为 1s，加快测试进度；在生产环境下，我们推荐这个值设为分钟级（一般可以设为 60），这样可以保证 DDL 操作的安全。</p>
<h4 id="332-ddl-">3.3.2 DDL 在正常情况下的耗时是多少？</h4>
<p>一般情况下处理一个 DDL 操作（之前没有其他 DDL 操作在处理）的耗时基本可以分如下为三种：</p>
<ul>
<li>add index 操作，且此操作对应表数据行数比较少，耗时约为 3s。</li>
<li>add index 操作，且此操作对应表数据行数比较多，耗时具体由表中数据行数和当时 QPS 情况定（add index 操作优先级比一般 SQL 低）。</li>
<li>其他 DDL 操作耗时约为 1s。</li>
</ul>
<p>此外，如果接收 DDL 请求的 TiDB 和 DDL owner 所处的 TiDB 是一台，那么上面列举的第一和第三种可能的耗时应该在几十到几百毫秒。</p>
<h4 id="333--ddl-">3.3.3 为什么有的时候执行 DDL 会很慢？</h4>
<p>可能原因如下：</p>
<ul>
<li>多个 DDL 语句一起执行的时候，后面的几个 DDL 语句会比较慢。原因是当前 TiDB 集群中 DDL 操作是串行执行的。</li>
<li>在正常集群启动后，第一个 DDL 操作的执行时间可能会比较久，一般在 30s 左右，这个原因是刚启动时 TiDB 在竞选处理 DDL 的 leader。</li>
<li>由于停 TiDB 时不能与 PD 正常通信（包括停电情况）或者用 <code>kill -9</code> 指令停 TiDB 导致 TiDB 没有及时从 PD 清理注册数据，那么会影响 TiDB 启动后 10min 内的 DDL 语句处理时间。这段时间内运行 DDL 语句时，每个 DDL 状态变化都需要等待 2 * lease（默认 lease = 45s）。</li>
<li>当集群中某个 TiDB 与 PD 之间发生通信问题，即 TiDB 不能从 PD 及时获取或更新版本信息，那么这时候 DDL 操作的每个状态处理需要等待 2 * lease。</li>
</ul>
<h4 id="334-tidb--s3-">3.3.4 TiDB 可以使用 S3 作为后端存储吗？</h4>
<p>不可以，目前 TiDB 只支持分布式存储引擎和 GolevelDB/RocksDB/BoltDB 引擎。</p>
<h4 id="335-information-schema-">3.3.5 Information_schema 能否支持更多真实信息？</h4>
<p>Information_schema 库里面的表主要是为了兼容 MySQL 而存在，有些第三方软件会查询里面的信息。在目前 TiDB 的实现中，里面大部分只是一些空表。后续随着 TiDB 的升级，会提供更多的参数信息。当前 TiDB 支持的 Information_schema 请参考 <a href="/docs-cn/dev/reference/system-databases/information-schema">TiDB 系统数据库说明文档</a>。</p>
<h4 id="336-tidb-backoff-type-">3.3.6 TiDB Backoff type 主要原因?</h4>
<p>TiDB-server 与 TiKV-server 随时进行通信，在进行大量数据操作过程中，会出现 <code>Server is busy</code> 或者 <code>backoff.maxsleep 20000ms</code> 的日志提示信息，这是由于 TiKV-server 在处理过程中系统比较忙而出现的提示信息，通常这时候可以通过系统资源监控到 TiKV 主机系统资源使用率比较高的情况出现。如果这种情况出现，可以根据资源使用情况进行相应的扩容操作。</p>
<h4 id="337-tidb-ticlient-type-">3.3.7 TiDB TiClient type 主要原因？</h4>
<p>TiClient Region Error 该指标描述的是在 TiDB-server 作为客户端通过 KV 接口访问 TiKV-server 进行数据操作过程中，TiDB-server 操作 TiKV-server 中的 Region 数据出现的错误类型与 metric 指标，错误类型包括 not_leader、stale_epoch。出现这些错误的情况是当 TiDB-server 根据自己的缓存信息去操作 Region leader 数据的时候，Region leader 发生了迁移或者 TiKV 当前的 Region 信息与 TiDB 缓存的路由信息不一致而出现的错误提示。一般这种情况下，TiDB-server 都会自动重新从 PD 获取最新的路由数据，重做之前的操作。</p>
<h4 id="338-tidb-">3.3.8 TiDB 同时支持的最大并发连接数？</h4>
<p>当前版本 TiDB 没有最大连接数的限制，如果并发过大导致响应时间增加，可以通过增加 TiDB 节点进行扩容。</p>
<h4 id="339-">3.3.9 如何查看某张表创建的时间？</h4>
<p>information_schema 库中的 tables 表里的 create_time 即为表的真实创建时间。</p>
<h4 id="339-tidb--expensive-query-">3.3.9 TiDB 的日志中 EXPENSIVE_QUERY 是什么意思？</h4>
<p>TiDB 在执行 SQL 时，预估出来每个 operator 处理了超过 10000 条数据就认为这条 query 是 expensive query。可以通过修改 tidb-server 配置参数来对这个门限值进行调整，调整后需要重新启动 tidb-server。</p>
<h4 id="3310--tidb--sql-">3.3.10 在 TiDB 中如何控制或改变 SQL 提交的执行优先级？</h4>
<p>TiDB 支持改变 <a href="/docs-cn/dev/reference/configuration/tidb-server/tidb-specific-variables#tidb_force_priority">per-session</a>、<a href="/docs-cn/dev/reference/configuration/tidb-server/configuration-file#force-priority">全局</a>或单个语句的优先级。优先级包括：</p>
<ul>
<li>HIGH_PRIORITY：该语句为高优先级语句，TiDB 在执行阶段会优先处理这条语句</li>
<li>LOW_PRIORITY：该语句为低优先级语句，TiDB 在执行阶段会降低这条语句的优先级</li>
</ul>
<p>以上两种参数可以结合 TiDB 的 DML 语言进行使用，使用方法举例如下：</p>
<ol>
<li>
<p>通过在数据库中写 SQL 的方式来调整优先级：</p>
<div class="copyable-code-block sql">
</div>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#66d9ef">select</span> HIGH_PRIORITY <span style="color:#f92672">|</span> LOW_PRIORITY <span style="color:#66d9ef">count</span>(<span style="color:#f92672">*</span>) <span style="color:#66d9ef">from</span> <span style="color:#66d9ef">table_name</span>;
<span style="color:#66d9ef">insert</span> HIGH_PRIORITY <span style="color:#f92672">|</span> LOW_PRIORITY <span style="color:#66d9ef">into</span> <span style="color:#66d9ef">table_name</span> insert_values;
<span style="color:#66d9ef">delete</span> HIGH_PRIORITY <span style="color:#f92672">|</span> LOW_PRIORITY <span style="color:#66d9ef">from</span> <span style="color:#66d9ef">table_name</span>;
<span style="color:#66d9ef">update</span> HIGH_PRIORITY <span style="color:#f92672">|</span> LOW_PRIORITY table_reference <span style="color:#66d9ef">set</span> assignment_list <span style="color:#66d9ef">where</span> where_condition;
<span style="color:#66d9ef">replace</span> HIGH_PRIORITY <span style="color:#f92672">|</span> LOW_PRIORITY <span style="color:#66d9ef">into</span> <span style="color:#66d9ef">table_name</span>;
</code></pre></div></li>
<li>
<p>全表扫会自动调整为低优先级，analyze 也是默认低优先级。</p>
</li>
</ol>
<h4 id="3311--tidb--auto-analyze-">3.3.11 在 TiDB 中 auto analyze 的触发策略是怎样的？</h4>
<p>触发策略：新表达到 1000 条，并且在 1 分钟内没有写入，会自动触发。</p>
<p>当表的（修改数/当前总行数）大于 <code>tidb_auto_analyze_ratio</code> 的时候，会自动触发 <code>analyze</code> 语句。<code>tidb_auto_analyze_ratio</code> 的默认值为 0.5，即默认开启此功能。为了保险起见，在开启此功能的时候，保证了其最小值为 0.3。但是不能大于等于 <code>pseudo-estimate-ratio</code>（默认值为 0.8），否则会有一段时间使用 pseudo 统计信息，建议设置值为 0.5。</p>
<h4 id="3312-sql--hint--index">3.3.12 SQL 中如何通过 hint 使用一个具体的 index？</h4>
<p>同 MySQL 的用法一致，例如：
<code>select column_name from table_name use index（index_name）where where_condition;</code></p>
<h4 id="3313--information-schema-is-changed-">3.3.13 触发 Information schema is changed 错误的原因？</h4>
<p>TiDB 在执行 SQL 语句时，会使用当时的 <code>schema</code> 来处理该 SQL 语句，而且 TiDB 支持在线异步变更 DDL。那么，在执行 DML 的时候可能有 DDL 语句也在执行，而你需要确保每个 SQL 语句在同一个 <code>schema</code> 上执行。所以当执行 DML 时，遇到正在执行中的 DDL 操作就可能会报 <code>Information schema is changed</code> 的错误。为了避免太多的 DML 语句报错，已做了一些优化。</p>
<p>现在会报此错的可能原因如下（后两个报错原因与表无关）：</p>
<ul>
<li>执行的 DML 语句中涉及的表和集群中正在执行的 DDL 的表有相同的，那么这个 DML 语句就会报此错。</li>
<li>这个 DML 执行时间很久，而这段时间内执行了很多 DDL 语句，导致中间 <code>schema</code> 版本变更次数超过 1024 （此为默认值，可以通过 <code>tidb_max_delta_schema_count</code> 变量修改）。</li>
<li>接受 DML 请求的 TiDB 长时间不能加载到 <code>schema information</code>（TiDB 与 PD 或 TiKV 之间的网络连接故障等会导致此问题），而这段时间内执行了很多 DDL 语句，导致中间 <code>schema</code> 版本变更次数超过 100。</li>
</ul>
<blockquote>
<p><strong>注意：</strong></p>
<ul>
<li>目前 TiDB 未缓存所有的 <code>schema</code> 版本信息。</li>
<li>对于每个 DDL 操作，<code>schema</code> 版本变更的数量与对应 <code>schema state</code> 变更的次数一致。</li>
<li>不同的 DDL 操作版本变更次数不一样。例如，<code>create table</code> 操作会有 1 次 <code>schema</code> 版本变更；<code>add column</code> 操作有 4 次 <code>schema</code> 版本变更。</li>
</ul>
</blockquote>
<h4 id="3314--information-schema-is-out-of-date-">3.3.14 触发 Information schema is out of date 错误的原因？</h4>
<p>当执行 DML 时，TiDB 超过一个 DDL lease 时间（默认 45s）没能加载到最新的 schema 就可能会报 <code>Information schema is out of date</code> 的错误。遇到此错的可能原因如下：</p>
<ul>
<li>执行此 DML 的 TiDB 被 kill 后准备退出，且此 DML 对应的事务执行时间超过一个 DDL lease，在事务提交时会报这个错误。</li>
<li>TiDB 在执行此 DML 时，有一段时间内连不上 PD 或者 TiKV，导致 TiDB 超过一个 DDL lease 时间没有 load schema，或者导致 TiDB 断开与 PD 之间带 keep alive 设置的连接。</li>
</ul>
<h4 id="3315--ddl-">3.3.15 高并发情况下执行 DDL 时报错的原因？</h4>
<p>高并发情况下执行 DDL（比如批量建表）时，极少部分 DDL 可能会由于并发执行时 key 冲突而执行失败。</p>
<p>并发执行 DDL 时，建议将 DDL 数量保持在 20 以下，否则你需要在应用端重试失败的 DDL 语句。</p>
<h3 id="34-tikv-">3.4 TiKV 管理</h3>
<h4 id="341-tikv-3">3.4.1 TiKV 集群副本建议配置数量是多少，是不是最小高可用配置（3个）最好？</h4>
<p>如果是测试环境 3 副本足够；在生产环境中，不可让集群副本数低于 3，需根据架构特点、业务系统及恢复能力的需求，适当增加副本数。值得注意的是，副本升高，性能会有下降，但是安全性更高。</p>
<h4 id="342-tikv-cluster-id-mismatch">3.4.2 TiKV 启动报错：cluster ID mismatch</h4>
<p>TiKV 本地存储的 cluster ID 和指定的 PD 的 cluster ID 不一致。在部署新的 PD 集群的时候，PD 会随机生成一个 cluster ID，TiKV 第一次初始化的时候会从 PD 获取 cluster ID 存储在本地，下次启动的时候会检查本地的 cluster ID 与 PD 的 cluster ID 是否一致，如果不一致则会报错并退出。出现这个错误一个常见的原因是，用户原先部署了一个集群，后来把 PD 的数据删除了并且重新部署了新的 PD，但是 TiKV 还是使用旧的数据重启连到新的 PD 上，就会报这个错误。</p>
<h4 id="343-tikv-duplicated-store-address">3.4.3 TiKV 启动报错：duplicated store address</h4>
<p>启动参数中的地址已经被其他的 TiKV 注册在 PD 集群中了。造成该错误的常见情况：TiKV <code>--data-dir</code> 指定的路径下没有数据文件夹（删除或移动后没有更新 –data-dir），用之前参数重新启动该 TiKV。请尝试用 pd-ctl 的 <a href="https://github.com/pingcap/pd/tree/55db505e8f35e8ab4e00efd202beb27a8ecc40fb/tools/pd-ctl#store-delete--label--weight-store_id----jqquery-string">store delete</a> 功能，删除之前的 store，然后重新启动 TiKV 即可。</p>
<h4 id="344-tikv-master--slave-">3.4.4 TiKV master 和 slave 用的是一样的压缩算法，为什么效果不一样?</h4>
<p>目前来看 master 有些文件的压缩率会高一些，这个取决于底层数据的分布和 RocksDB 的实现，数据大小偶尔有些波动是正常的，底层存储引擎会根据需要调整数据。</p>
<h4 id="345-tikv-block-cache-">3.4.5 TiKV block cache 有哪些特性？</h4>
<p>TiKV 使用了 RocksDB 的 Column Family (CF) 特性，KV 数据最终存储在默认 RocksDB 内部的 default、write、lock 3 个 CF 内。</p>
<ul>
<li>default CF 存储的是真正的数据，与其对应的参数位于 <code>[rocksdb.defaultcf]</code> 项中。</li>
<li>write CF 存储的是数据的版本信息（MVCC）、索引、小表相关的数据，相关的参数位于 <code>[rocksdb.writecf]</code> 项中。</li>
<li>lock CF 存储的是锁信息，系统使用默认参数。</li>
<li>Raft RocksDB 实例存储 Raft log。default CF 主要存储的是 Raft log，与其对应的参数位于 <code>[raftdb.defaultcf]</code> 项中。</li>
<li>所有 CF 共享一个 Block-cache，用于缓存数据块，加速 RocksDB 的读取速度，Block-cache 的大小通过参数 <code>block-cache-size</code> 控制，<code>block-cache-size</code> 越大，能够缓存的热点数据越多，对读取操作越有利，同时占用的系统内存也会越多。</li>
<li>每个 CF 有各自的 Write-buffer，大小通过 <code>write-buffer-size</code> 控制。</li>
</ul>
<h4 id="346-tikv-channel-full-">3.4.6 TiKV channel full 是什么原因？</h4>
<ul>
<li>Raftstore 线程太忙，或者因 I/O 而卡住。可以看一下 Raftstore 的 CPU 使用情况。</li>
<li>TiKV 过忙（CPU、磁盘 I/O 等），请求处理不过来。</li>
</ul>
<h4 id="347-tikv--region-leader-">3.4.7 TiKV 频繁切换 Region leader 是什么原因？</h4>
<ul>
<li>网络问题导致节点间通信卡了，查看 Report failures 监控。</li>
<li>原主 Leader 的节点卡了，导致没有及时给 Follower 发送消息。</li>
<li>Raftstore 线程卡了。</li>
</ul>
<h4 id="348-">3.4.8 如果一个节点挂了会影响服务吗？影响会持续多久？</h4>
<p>TiDB 使用 Raft 在多个副本之间做数据同步（默认为每个 Region 3 个副本）。当一份备份出现问题时，其他的副本能保证数据的安全。根据 Raft 协议，当某个节点挂掉导致该节点里的 Leader 失效时，在最大 2 * lease time（leasetime 是 10 秒）时间后，通过 Raft 协议会很快将一个另外一个节点里的 Follower 选为新的 Region Leader 来提供服务。</p>
<h4 id="349-tikv--iocpu">3.4.9 TiKV 在分别在那些场景下占用大量 IO、内存、CPU（超过参数配置的多倍）？</h4>
<p>在大量写入、读取的场景中会占用大量的磁盘 IO、内存、CPU。在执行很复杂的查询，比如会产生很大中间结果集的情况下，会消耗很多的内存和 CPU 资源。</p>
<h4 id="3410-tikv--sassata--ssdsas-">3.4.10 TiKV 是否可以使用 SAS/SATA 盘或者进行 SSD/SAS 混合部署？</h4>
<p>不可以使用，TiDB 在进行 OLTP 场景中，数据访问和操作需要高 IO 磁盘的支持，TiDB 作为强一致的分布式数据库，存在一定的写放大，如副本复制、存储底层 Compaction，因此，TiDB 部署的最佳实践中推荐用户使用 NVMe SSD 磁盘作为数据存储磁盘。另外，TiKV 与 PD 不能混合部署。</p>
<h4 id="3411--key--range-">3.4.11 数据表 Key 的 Range 范围划分是在数据接入之前就已经划分好了吗？</h4>
<p>不是的，这个和 MySQL 分表规则不一样，需要提前设置好，TiKV 是根据 Region 的大小动态分裂的。</p>
<h4 id="3412-region-">3.4.12 Region 是如何进行分裂的？</h4>
<p>Region 不是前期划分好的，但确实有 Region 分裂机制。当 Region 的大小超过参数 <code>region-max-size</code> 或 <code>region-max-keys</code> 的值时，就会触发分裂，分裂后的信息会汇报给 PD。</p>
<h4 id="3413-tikv--mysql--innodb-flush-log-trx-commit-">3.4.13 TiKV 是否有类似 MySQL 的 <code>innodb_flush_log_trx_commit</code> 参数，来保证提交数据不丢失？</h4>
<p>是的，TiKV 单机的存储引擎目前使用两个 RocksDB 实例，其中一个存储 raft-log，TiKV 有个 sync-log 参数，在 ture 的情况下，每次提交都会强制刷盘到 raft-log，如果发生 crash 后，通过 raft-log 进行 KV 数据的恢复。</p>
<h4 id="3414--wal--ssdraid-raid--cache-numa--io-">3.4.14 对 WAL 存储有什么推荐的硬件配置，例如 SSD，RAID 级别，RAID 卡 cache 策略，NUMA 设置，文件系统选择，操作系统的 IO 调度策略等？</h4>
<p>WAL 属于顺序写，目前我们并没有单独对他进行配置，建议 SSD，RAID 如果允许的话，最好是 RAID 10，RAID 卡 cache、操作系统 I/O 调度目前没有针对性的最佳实践，Linux 7 以上默认配置即可，NUMA 没有特别建议，NUMA 内存分配策略可以尝试使用 <code>interleave = all</code>，文件系统建议 ext4。</p>
<h4 id="3415--sync-log--true-">3.4.15 在最严格的 <code>sync-log = true</code> 数据可用模式下，写入性能如何？</h4>
<p>一般来说，开启 <code>sync-log</code> 会让性能损耗 30% 左右。关闭 <code>sync-log</code> 时的性能表现，请参见 <a href="/docs-cn/dev/benchmark/sysbench-v4">TiDB Sysbench 性能测试报告</a>。</p>
<h4 id="3416--tikv--raft--">3.4.16 是否可以利用 TiKV 的 Raft + 多副本达到完全的数据可靠，单机存储引擎是否需要最严格模式？</h4>
<p>通过使用 <a href="https://raft.github.io/">Raft 一致性算法</a>，数据在各 TiKV 节点间复制为多副本，以确保某个节点挂掉时数据的安全性。只有当数据已写入超过 50% 的副本时，应用才返回 ACK（三副本中的两副本）。但理论上两个节点也可能同时发生故障，所以除非是对性能要求高于数据安全的场景，一般都强烈推荐开启 <code>sync-log</code>。</p>
<p>另外，还有一种 <code>sync-log</code> 的替代方案，即在 Raft group 中用五个副本而非三个。这将允许两个副本同时发生故障，而仍然能保证数据安全性。</p>
<p>对于单机存储引擎也同样推荐打开 <code>sync-log</code> 模式。否则如果节点宕机可能会丢失最后一次写入数据。</p>
<h4 id="3417--raft--roundtrip">3.4.17 使用 Raft 协议，数据写入会有多次网络的 roundtrip，实际写入延迟如何？</h4>
<p>理论上，和单机数据库相比，数据写入会多四个网络延迟。</p>
<h4 id="3418--mysql--innodb-memcached-plugin-kv--cache">3.4.18 有没有类似 MySQL 的 InnoDB Memcached plugin，可以直接使用 KV 接口，可以不需要独立的 Cache？</h4>
<p>TiKV 支持单独进行接口调用，理论上也可以起个实例做为 Cache，但 TiDB 最大的价值是分布式关系型数据库，我们原则上不对 TiKV 单独进行支持。</p>
<h4 id="3419-coprocessor-">3.4.19 Coprocessor 组件的主要作用？</h4>
<ul>
<li>减少 TiDB 与 TiKV 之间的数据传输。</li>
<li>计算下推，充分利用 TiKV 的分布式计算资源。</li>
</ul>
<h4 id="3420-io-error-no-space-left-on-device-while-appending-to-file">3.4.20 IO error: No space left on device While appending to file</h4>
<p>这是磁盘空间不足导致的，需要加节点或者扩大磁盘空间。</p>
<h4 id="3421--tikv--oom">3.4.21 为什么 TiKV 容易出现 OOM？</h4>
<p>TiKV 的内存占用主要来自于 RocksDB 的 block-cache，默认为系统总内存的 40%。当 TiKV 容易出现 OOM 时，检查 <code>block-cache-size</code> 配置是否过高。还需要注意，当单机部署了多个 TiKV 实例时，需要显式地配置该参数，以防止多个实例占用过多系统内存导致 OOM。</p>
<h4 id="3422-tidb--rawkv--tikv-">3.4.22 TiDB 数据和 RawKV 数据可存储于同一个 TiKV 集群里吗？</h4>
<p>不可以。TiDB 数据（或使用其他事务 API 生成的数据）依赖于一种特殊的键值格式，和 RawKV API 数据（或其他基于 RawKV 的服务生成的数据）并不兼容。</p>
<h3 id="35-tidb-">3.5 TiDB 测试</h3>
<h4 id="351-tidb-sysbench-">3.5.1 TiDB Sysbench 基准测试结果如何？</h4>
<p>很多用户在接触 TiDB 都习惯做一个基准测试或者 TiDB 与 MySQL 的对比测试，官方也做了一个类似测试，汇总很多测试结果后，我们发现虽然测试的数据有一定的偏差，但结论或者方向基本一致，由于 TiDB 与 MySQL 由于架构上的差别非常大，很多方面是很难找到一个基准点，所以官方的建议两点：</p>
<ul>
<li>大家不要用过多精力纠结这类基准测试上，应该更多关注 TiDB 的场景上的区别。</li>
<li>大家可以直接参考 <a href="/docs-cn/dev/benchmark/sysbench-v4">TiDB Sysbench 性能测试报告</a>。</li>
</ul>
<h4 id="352-tidb--qps--mysql-">3.5.2 TiDB 集群容量 QPS 与节点数之间关系如何，和 MySQL 对比如何？</h4>
<ul>
<li>在 10 节点内，TiDB 写入能力（Insert TPS）和节点数量基本成 40% 线性递增，MySQL 由于是单节点写入，所以不具备写入扩展能力。</li>
<li>MySQL 读扩容可以通过添加从库进行扩展，但写流量无法扩展，只能通过分库分表，而分库分表有很多问题，具体参考<a href="http://t.cn/RTD18qV">方案虽好，成本先行：数据库 Sharding+Proxy 实践解析</a>。</li>
<li>TiDB 不管是读流量、还是写流量都可以通过添加节点快速方便的进行扩展。</li>
</ul>
<h4 id="353--dba--mysql--tidb--mysql-">3.5.3 我们的 DBA 测试过 MySQL 性能，单台 TiDB 的性能没有 MySQL 性能那么好？</h4>
<p>TiDB 设计的目标就是针对 MySQL 单台容量限制而被迫做的分库分表的场景，或者需要强一致性和完整分布式事务的场景。它的优势是通过尽量下推到存储节点进行并行计算。对于小表（比如千万级以下），不适合 TiDB，因为数据量少，Region 有限，发挥不了并行的优势，最极端的就是计数器表，几行记录高频更新，这几行在 TiDB 里，会变成存储引擎上的几个 KV，然后只落在一个 Region 里，而这个 Region 只落在一个节点上。加上后台强一致性复制的开销，TiDB 引擎到 TiKV 引擎的开销，最后表现出来的就是没有单个 MySQL 好。</p>
<h3 id="36-tidb-">3.6 TiDB 备份恢复</h3>
<h4 id="361-tidb-">3.6.1 TiDB 主要备份方式？</h4>
<p>目前，推荐的备份方式是使用 <a href="/docs-cn/dev/reference/tools/mydumper">PingCAP fork 的 Mydumper</a>。尽管 TiDB 也支持使用 MySQL 官方工具 <code>mysqldump</code> 进行数据备份、恢复，但其性能低于 <a href="/docs-cn/dev/reference/tools/mydumper"><code>mydumper</code></a>/<a href="/docs-cn/dev/reference/tools/loader"><code>loader</code></a>，并且该工具备份、恢复大量数量时，要耗费更多时间。</p>
<p>使用 Mydumper 导出来的数据文件尽可能的小, 最好不要超过 64M, 可以设置参数 -F 64；</p>
<p>loader 的 -t 参数可以根据 TiKV 的实例个数以及负载进行评估调整，例如 3 个 TiKV 的场景， 此值可以设为 3 * (1 ～ n)，当 TiKV 负载过高，loader 以及 TiDB 日志中出现大量 <code>backoffer.maxSleep 15000ms is exceeded</code> 可以适当调小该值，当 TiKV 负载不是太高的时候，可以适当调大该值。</p>
<h2 id="heading-2">四、数据、流量迁移</h2>
<h3 id="41-">4.1 全量数据导出导入</h3>
<h4 id="411-mydumper">4.1.1 Mydumper</h4>
<p>参见 <a href="/docs-cn/dev/reference/tools/mydumper">Mydumper 使用文档</a>。</p>
<h4 id="412-loader">4.1.2 Loader</h4>
<p>参见 <a href="/docs-cn/dev/reference/tools/loader">Loader 使用文档</a>。</p>
<h4 id="413--mysql--tidb-">4.1.3 如何将一个运行在 MySQL 上的应用迁移到 TiDB 上？</h4>
<p>TiDB 支持绝大多数 MySQL 语法，一般不需要修改代码。</p>
<h4 id="414--mysql--user--tidb-">4.1.4 不小心把 MySQL 的 user 表导入到 TiDB 了，或者忘记密码，无法登录，如何处理？</h4>
<p>重启 TiDB 服务，配置文件中增加 <code>-skip-grant-table=true</code> 参数，无密码登录集群后，可以根据情况重建用户，或者重建 mysql.user 表，具体表结构搜索官网。</p>
<h4 id="415--loader-tidb-">4.1.5 在 Loader 运行的过程中，TiDB 可以对外提供服务吗？</h4>
<p>该操作进行逻辑插入，TiDB 仍可对外提供服务，但不要执行相关 DDL 操作。</p>
<h4 id="416--tidb-">4.1.6 如何导出 TiDB 数据？</h4>
<p>TiDB 目前暂时不支持 <code>select into outfile</code>，可以通过以下方式导出 TiDB 数据：参考 <a href="https://blog.csdn.net/xin_yu_xin/article/details/7574662">MySQL 使用 mysqldump 导出某个表的部分数据</a>，使用 mysqldump 加 where 条件导出，使用 MySQL client 将 select 的结果输出到一个文件。</p>
<h4 id="417--db2oracle--tidb">4.1.7 如何从 DB2、Oracle 数据库迁移到 TiDB？</h4>
<p>DB2、Oracle 到 TiDB 数据迁移（增量+全量），通常做法有：</p>
<ul>
<li>使用 Oracle 官方迁移工具，如 OGG、Gateway（透明网关）、CDC（Change Data Capture）。</li>
<li>自研数据导出导入程序实现。</li>
<li>导出（Spool）成文本文件，然后通过 Load infile 进行导入。</li>
<li>使用第三方数据迁移工具。</li>
</ul>
<p>目前看来 OGG 最为合适。</p>
<h4 id="418--sqoop--tidb----batch--javasqlbatchupdateexecptionstatement-count-5001-exceeds-the-transaction-limitation-">4.1.8 用 Sqoop 批量写入 TiDB 数据，虽然配置了 <code>--batch</code> 选项，但还是会遇到 <code>java.sql.BatchUpdateExecption:statement count 5001 exceeds the transaction limitation</code> 的错误，该如何解决？</h4>
<ul>
<li>
<p>在 Sqoop 中，<code>--batch</code> 是指每个批次提交 100 条 statement，但是默认每个 statement 包含 100 条 SQL 语句，所以此时 100 * 100 = 10000 条 SQL 语句，超出了 TiDB 的事务限制 5000 条，可以增加选项 <code>-Dsqoop.export.records.per.statement=10</code> 来解决这个问题，完整的用法如下：</p>
<div class="copyable-code-block shell-regular">
</div>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sqoop export <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    -Dsqoop.export.records.per.statement<span style="color:#f92672">=</span><span style="color:#ae81ff">10</span> <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    --connect jdbc:mysql://mysql.example.com/sqoop <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    --username sqoop <span style="color:#e6db74">${</span>user<span style="color:#e6db74">}</span> <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    --password <span style="color:#e6db74">${</span>passwd<span style="color:#e6db74">}</span> <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    --table <span style="color:#e6db74">${</span>tab_name<span style="color:#e6db74">}</span> <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    --export-dir <span style="color:#e6db74">${</span>dir<span style="color:#e6db74">}</span> <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    --batch
</code></pre></div></li>
<li>
<p>也可以选择增大 tidb 的单个事物语句数量限制，不过这个会导致内存上涨。</p>
</li>
</ul>
<h4 id="419-tidb--oracle--flashback-query-ddl-">4.1.9 TiDB 有像 Oracle 那样的 Flashback Query 功能么，DDL 支持么？</h4>
<p>有，也支持 DDL。详细参考 <a href="/docs-cn/dev/how-to/get-started/read-historical-data">TiDB 历史数据回溯</a>。</p>
<h3 id="42-">4.2 在线数据同步</h3>
<h4 id="421-syncer-">4.2.1 Syncer 架构</h4>
<p>详细参考 <a href="https://pingcap.com/blog-cn/tidb-syncer/">解析 TiDB 在线数据同步工具 Syncer</a>。</p>
<h5 id="4211-syncer-">4.2.1.1 Syncer 使用文档</h5>
<p>详细参考 <a href="/docs-cn/dev/reference/tools/syncer">Syncer 使用文档</a>。</p>
<h5 id="4212--syncer-">4.2.1.2 如何配置监控 Syncer 运行情况？</h5>
<p>下载 <a href="https://github.com/pingcap/tidb-ansible/blob/master/scripts/syncer.json">Syncer Json</a> 导入到 Grafana，修改 Prometheus 配置文件，添加以下内容：</p>
<ul>
<li>job_name: 'syncer_ops' // 任务名字
static_configs:</li>
<li>targets: ['10.10.1.1:10096'] //Syncer 监听地址与端口，通知 prometheus 拉取 Syncer 的数据。</li>
</ul>
<p>重启 Prometheus 即可。</p>
<h5 id="4213--hbaseelasticsearh-">4.2.1.3 有没有现成的同步方案，可以将数据同步到 Hbase、Elasticsearh 等其他存储？</h5>
<p>没有，目前依赖程序自行实现。</p>
<h5 id="4214--syncer-">4.2.1.4 利用 Syncer 做数据同步的时候是否支持只同步部分表？</h5>
<p>支持，具体参考 Syncer 使用手册 <a href="/docs-cn/dev/reference/tools/syncer">Syncer 使用文档</a></p>
<h5 id="4215--ddl--syncer-">4.2.1.5 频繁的执行 DDL 会影响 Syncer 同步速度吗？</h5>
<p>频繁执行 DDL 对同步速度会有影响。对于 Sycner 来说，DDL 是串行执行的，当同步遇到了 DDL，就会以串行的方式执行，所以这种场景就会导致同步速度下降。</p>
<h5 id="4216--syncer-gtid--syncermeta--syncer--syncermeta-">4.2.1.6 使用 Syncer gtid 的方式同步时，同步过程中会不断更新 syncer.meta 文件，如果 Syncer 所在的机器坏了，导致 syncer.meta 文件所在的目录丢失，该如何处理？</h5>
<p>当前 Syncer 版本的没有进行高可用设计，Syncer 目前的配置信息 syncer.meta 直接存储在硬盘上，其存储方式类似于其他 MySQL 生态工具，比如 Mydumper。因此，要解决这个问题当前可以有两个方法：</p>
<p>1）把 syncer.meta 数据放到比较安全的磁盘上，例如磁盘做好 raid1；</p>
<p>2）可以根据 Syncer 定期上报到 Prometheus 的监控信息来还原出历史同步的位置信息，该方法的位置信息在大量同步数据时由于延迟会可能不准确。</p>
<h5 id="4217--syncer--tidb--mysql-dml-">4.2.1.7  Syncer 下游 TiDB 数据和 MySQL 数据不一致，DML 会退出么？</h5>
<ul>
<li>上游 MySQL 中存在数据，下游 TiDB 中该数据不存在，上游 MySQL 执行 <code>UPDATE</code> 或 <code>DELETE</code>（更新/删除）该条数据的操作时，Syncer 同步过程即不会报错退出也没有该条数据。</li>
<li>下游有主键索引或是唯一索引冲突时，执行 <code>UPDATE</code> 会退出，执行 <code>INSERT</code> 不会退出。</li>
</ul>
<h3 id="43-">4.3 业务流量迁入</h3>
<h4 id="431-">4.3.1 如何快速迁移业务流量？</h4>
<p>我们建议通过 Syncer 工具搭建成多源 MySQL -&gt; TiDB 实时同步环境，读写流量可以按照需求分阶段通过修改网络配置进行流量迁移，建议 DB 上层部署一个稳定的网络 LB（HAproxy、LVS、F5、DNS 等），这样直接修改网络配置就能实现无缝流量迁移。</p>
<h4 id="432-tidb-">4.3.2 TiDB 总读写流量有限制吗？</h4>
<p>TiDB 读流量可以通过增加 TiDB server 进行扩展，总读容量无限制，写流量可以通过增加 TiKV 节点进行扩容，基本上写容量也没有限制。</p>
<h4 id="433-transaction-too-large-">4.3.3 Transaction too large 是什么原因，怎么解决？</h4>
<p>TiDB 限制了单条 KV entry 不超过 6MB。</p>
<p>分布式事务要做两阶段提交，而且底层还需要做 Raft 复制。如果一个事务非常大，提交过程会非常慢，事务写冲突概率会增加，而且事务失败后回滚会导致不必要的性能开销。所以我们设置了 key-value entry 的总大小默认不超过 100MB。如果业务需要使用大事务，可以修改配置文件中的 <code>txn-total-size-limit</code> 配置项进行调整，最大可以修改到 10G。实际的大小限制还受机器的物理内存影响。</p>
<p>在 Google 的 Cloud Spanner 上面，也有类似的<a href="https://cloud.google.com/spanner/docs/limits">限制</a>。</p>
<h4 id="434-">4.3.4 如何批量导入？</h4>
<p>导入数据的时候，可以分批插入，每批最好不要超过 1w 行。</p>
<h4 id="435-tidb-">4.3.5 TiDB 中删除数据后会立即释放空间吗？</h4>
<p>DELETE，TRUNCATE 和 DROP 都不会立即释放空间。对于 TRUNCATE 和 DROP 操作，在达到 TiDB 的 GC (garbage collection) 时间后（默认 10 分钟），TiDB 的 GC 机制会删除数据并释放空间。对于 DELETE 操作 TiDB 的 GC 机制会删除数据，但不会释放空间，而是当后续数据写入 RocksDB 且进行 compact 时对空间重新利用。</p>
<h4 id="436-load--ddl-">4.3.6 Load 数据时可以对目标表执行 DDL 操作吗？</h4>
<p>不可以，加载数据期间不能对目标表执行任何 DDL 操作，这会导致数据加载失败。</p>
<h4 id="437-tidb--replace-into-">4.3.7 TiDB 是否支持 replace into 语法？</h4>
<p>支持，但是 load data 不支持 replace into 语法。</p>
<h4 id="438-">4.3.8 数据删除后查询速度为何会变慢？</h4>
<p>大量删除数据后，会有很多无用的 key 存在，影响查询效率。目前正在开发 Region Merge 功能，完善之后可以解决这个问题，具体看参考<a href="https://pingcap.com/blog-cn/tidb-best-practice/">最佳实践</a>中的删除数据部分。</p>
<h4 id="439-">4.3.9 数据删除最高效最快的方式？</h4>
<p>在删除大量数据的时候，建议使用 <code>Delete * from t where xx limit 5000</code>（xx 建议在满足业务过滤逻辑下，尽量加上强过滤索引列或者直接使用主键选定范围，如 <code>id &gt;= 5000*n+m and id &lt;= 5000*(n+1)+m</code> 这样的方案，通过循环来删除，用 <code>Affected Rows == 0</code> 作为循环结束条件，这样避免遇到事务大小的限制。如果一次删除的数据量非常大，这种循环的方式会越来越慢，因为每次删除都是从前向后遍历，前面的删除之后，短时间内会残留不少删除标记（后续会被 GC 掉），影响后面的 Delete 语句。如果有可能，建议把 Where 条件细化。可以参考官网<a href="https://pingcap.com/blog-cn/tidb-best-practice/">最佳实践</a>。</p>
<h4 id="4310-tidb-">4.3.10 TiDB 如何提高数据加载速度？</h4>
<p>主要有两个方面：</p>
<ul>
<li>目前已开发分布式导入工具 <a href="/docs-cn/dev/reference/tools/tidb-lightning/overview">Lightning</a>，需要注意的是数据导入过程中为了性能考虑，不会执行完整的事务流程，所以没办法保证导入过程中正在导入的数据的 ACID 约束，只能保证整个导入过程结束以后导入数据的 ACID 约束。因此适用场景主要为新数据的导入（比如新的表或者新的索引），或者是全量的备份恢复（先 Truncate 原表再导入）。</li>
<li>TiDB 的数据加载与磁盘以及整体集群状态相关，加载数据时应关注该主机的磁盘利用率，TiClient Error/Backoff/Thread CPU 等相关 metric，可以分析相应瓶颈。</li>
</ul>
<h4 id="4311-">4.3.11 对数据做删除操作之后，空间回收比较慢，如何处理？</h4>
<p>可以设置并行 GC，加快对空间的回收速度。默认并发为 1，最大可调整为 tikv 实例数量的 50%。可使用 <code>update mysql.tidb set VARIABLE_VALUE="3" where VARIABLE_NAME="tikv_gc_concurrency";</code> 命令来调整。</p>
<h2 id="sql-">五、SQL 优化</h2>
<h3 id="51-tidb-">5.1 TiDB 执行计划解读</h3>
<p>详细解读 <a href="/docs-cn/dev/reference/performance/understanding-the-query-execution-plan">理解 TiDB 执行计划</a>。</p>
<h4 id="511-">5.1.1 统计信息收集</h4>
<p>详细解读 <a href="/docs-cn/dev/reference/performance/statistics">统计信息</a>。</p>
<h4 id="512-count-">5.1.2 Count 如何加速？</h4>
<p>Count 就是暴力扫表，提高并发度能显著的提升速度，修改并发度可以参考 <code>tidb_distsql_scan_concurrency</code> 变量，但是也要看 CPU 和 I/O 资源。TiDB 每次查询都要访问 TiKV，在数据量小的情况下，MySQL 都在内存里，TiDB 还需要进行一次网络访问。</p>
<p>提升建议：</p>
<ul>
<li>建议提升硬件配置，可以参考<a href="/docs-cn/dev/how-to/deploy/hardware-recommendations">部署建议</a>。</li>
<li>提升并发度，默认是 10，可以提升到 50 试试，但是一般提升在 2-4 倍之间。</li>
<li>测试大数据量的 count。</li>
<li>调优 TiKV 配置，可以参考<a href="/docs-cn/dev/reference/performance/tune-tikv">性能调优</a>。</li>
</ul>
<h4 id="513--ddl-">5.1.3 查看当前 DDL 的进度？</h4>
<p>通过 <code>admin show ddl</code> 查看当前 job 进度。操作如下：</p>
<div class="copyable-code-block sql">
</div>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#66d9ef">admin</span> <span style="color:#66d9ef">show</span> ddl;
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">*************************** 1. row ***************************
  SCHEMA_VER: 140
       OWNER: 1a1c4174-0fcd-4ba0-add9-12d08c4077dc
RUNNING_JOBS: ID:121, Type:add index, State:running, SchemaState:write reorganization, SchemaID:1, TableID:118, RowCount:77312, ArgLen:0, start time: 2018-12-05 16:26:10.652 +0800 CST, Err:&lt;nil&gt;, ErrCount:0, SnapshotVersion:404749908941733890
     SELF_ID: 1a1c4174-0fcd-4ba0-add9-12d08c4077dc
</code></pre></div><p>从上面操作结果可知，当前正在处理的是 <code>add index</code> 操作。且从 <code>RUNNING_JOBS</code> 列的 <code>RowCount</code> 字段可以知道当前 <code>add index</code> 操作已经添加了 77312 行索引。</p>
<h4 id="514--ddl-job">5.1.4 如何查看 DDL job？</h4>
<p>可以使用 <code>admin show ddl</code> 语句查看正在运行的 DDL 作业。</p>
<ul>
<li><code>admin show ddl jobs</code>：用于查看当前 DDL 作业队列中的所有结果（包括正在运行以及等待运行的任务）以及已执行完成的 DDL 作业队列中的最近十条结果。</li>
<li><code>admin show ddl job queries 'job_id' [, 'job_id'] ...</code>：用于显示 <code>job_id</code> 对应的 DDL 任务的原始 SQL 语句。此 <code>job_id</code> 只搜索正在执行中的任务以及 DDL 历史作业队列中的最近十条结果。</li>
</ul>
<h4 id="515-tidb--cost-cbo">5.1.5 TiDB 是否支持基于 COST 的优化（CBO），如果支持，实现到什么程度？</h4>
<p>是的，TiDB 使用的基于成本的优化器（CBO），我们有一个小组单独会对代价模型、统计信息持续优化，除此之外，我们支持 hash join、soft merge 等关联算法。</p>
<h4 id="516--analyze-">5.1.6 如何确定某张表是否需要做 analyze ？</h4>
<p>可以通过 <code>show stats_healthy</code> 来查看 Healthy 字段，一般小于等于 60 的表需要做 analyze。</p>
<h4 id="517-sql-id-">5.1.7 SQL 的执行计划展开成了树，ID 的序号有什么规律吗？这棵树的执行顺序会是怎么样的？</h4>
<p>ID 没什么规律，只要是唯一就行，不过生成的时候，是有一个计数器，生成一个 plan 就加一，执行的顺序和序号无关，整个执行计划是一颗树，执行时从根节点开始，不断地向上返回数据。执行计划的理解，请参考<a href="/docs-cn/dev/reference/performance/understanding-the-query-execution-plan">理解 TiDB 执行计划</a>。</p>
<h4 id="518-tidb-task-cop--root-">5.1.8 TiDB 执行计划中，task cop 在一个 root 下，这个是并行的么？</h4>
<p>目前 TiDB 的计算任务隶属于两种不同的 task：cop task 和 root task。cop task 是指被下推到 KV 端分布式执行的计算任务，root task 是指在 TiDB 端单点执行的计算任务。一般来讲 root task 的输入数据是来自于 cop task 的；但是 root task 在处理数据的时候，TiKV 上的 cop task 也可以同时处理数据，等待 TiDB 的 root task 拉取，所以从这个观点上来看，他们是并行的；但是存在数据上下游关系；在执行的过程中，某些时间段其实也是并行的，第一个 cop task 在处理 [100, 200] 的数据，第二个 cop task 在处理 [1, 100] 的数据。执行计划的理解，请参考<a href="/docs-cn/dev/reference/performance/understanding-the-query-execution-plan">理解 TiDB 执行计划</a>。</p>
<h2 id="heading-3">六、数据库优化</h2>
<h3 id="61-tidb">6.1 TiDB</h3>
<h4 id="611-tidb-">6.1.1 TiDB 参数及调整</h4>
<p>详情参考 <a href="/docs-cn/dev/reference/configuration/tidb-server/configuration">TiDB 配置参数</a>。</p>
<h4 id="612-">6.1.2 如何打散热点</h4>
<p>TiDB 中以 Region 分片来管理数据库，通常来讲，TiDB 的热点指的是 Region 的读写访问热点。而 TiDB 中对于 PK 非整数或没有 PK 的表，可以通过设置 <code>SHARD_ROW_ID_BITS</code> 来适度分解 Region 分片，以达到打散 Region 热点的效果。详情可参考官网 <a href="/docs-cn/dev/reference/configuration/tidb-server/tidb-specific-variables#shard_row_id_bits">TiDB 专用系统变量和语法</a>中 <code>SHARD_ROW_ID_BITS</code> 的介绍。</p>
<h3 id="62-tikv">6.2 TiKV</h3>
<h4 id="621-tikv-">6.2.1 TiKV 性能参数调优</h4>
<p>详情参考 <a href="/docs-cn/dev/reference/performance/tune-tikv">TiKV 性能参数调优</a>。</p>
<h2 id="heading-4">七、监控</h2>
<h3 id="71-prometheus-">7.1 Prometheus 监控框架</h3>
<p>详细参考 <a href="/docs-cn/dev/how-to/monitor/overview">TiDB 监控框架概述</a>。</p>
<h3 id="72-">7.2 监控指标解读</h3>
<p>详细参考 <a href="/docs-cn/dev/reference/key-monitoring-metrics/overview-dashboard">重要监控指标详解</a>。</p>
<h4 id="721-">7.2.1 目前的监控使用方式及主要监控指标，有没有更好看的监控？</h4>
<p>TiDB 使用 Prometheus + Grafana 组成 TiDB 数据库系统的监控系统，用户在 Grafana 上通过 dashboard 可以监控到 TiDB 的各类运行指标，包括系统资源的监控指标，包括客户端连接与 SQL 运行的指标，包括内部通信和 Region 调度的指标，通过这些指标，可以让数据库管理员更好的了解到系统的运行状态，运行瓶颈等内容。在监控指标的过程中，我们按照 TiDB 不同的模块，分别列出了各个模块重要的指标项，一般用户只需要关注这些常见的指标项。具体指标请参见<a href="/docs-cn/dev/reference/key-monitoring-metrics/overview-dashboard">官方文档</a>。</p>
<h4 id="722-prometheus--15--2-">7.2.2 Prometheus 监控数据默认 15 天自动清除一次，可以自己设定成 2 个月或者手动删除吗？</h4>
<p>可以的，在 Prometheus 启动的机器上，找到启动脚本，然后修改启动参数，然后重启 Prometheus 生效。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">--storage.tsdb.retention="60d"
</code></pre></div><h4 id="723-region-health-">7.2.3 Region Health 监控项</h4>
<p>TiDB-2.0 版本中，PD metric 监控页面中，对 Region 健康度进行了监控，其中 Region Health 监控项是对所有 Region 副本状况的一些统计。其中 miss 是缺副本，extra 是多副本。同时也增加了按 Label 统计的隔离级别，level-1 表示这些 Region 的副本在第一级 Label 下是物理隔离的，没有配置 location label 时所有 Region 都在 level-0。</p>
<h4 id="724-statement-count--selectsimplefull-">7.2.4 Statement Count 监控项中的 selectsimplefull 是什么意思？</h4>
<p>代表全表扫，但是可能是很小的系统表。</p>
<h4 id="725--qps--statement-ops-">7.2.5 监控上的 QPS 和 Statement OPS 有什么区别？</h4>
<p>QPS 会统计执行的所有 SQL 命令，包括 use database、load data、begin、commit、set、show、insert、select 等。</p>
<p>Statement OPS 只统计 select、update、insert 等业务相关的，所以 Statement OPS 的统计和业务比较相符。</p>
<h2 id="cloud-tidb">八、Cloud TiDB</h2>
<h3 id="81-">8.1 腾讯云</h3>
<h4 id="811--cloud-tidb-">8.1.1 目前 Cloud TiDB 都有那些云厂商？</h4>
<p>Cloud TiDB 目前已经在腾讯云、UCloud 上线，都是数据库一级入口，欢迎大家使用。</p>
<h2 id="heading-5">九、故障排除</h2>
<h3 id="91-tidb-">9.1 TiDB 自定义报错汇总</h3>
<h4 id="911-error-8005-hy000--write-conflict-txnstartts-is-stale">9.1.1 ERROR 8005 (HY000) : Write Conflict, txnStartTS is stale</h4>
<p>可以检查 <code>tidb_disable_txn_auto_retry</code> 是否为 on。如是，将其设置为 off；如已经是 off，将 <code>tidb_retry_limit</code> 调大到不再发生该错误。</p>
<h4 id="912-error-9001-hy000--pd-server-timeout">9.1.2 ERROR 9001 (HY000) : PD Server Timeout</h4>
<p>请求 PD 超时，请检查 PD Server 状态/监控/日志以及 TiDB Server 与 PD Server 之间的网络。</p>
<h4 id="913-error-9002-hy000--tikv-server-timeout">9.1.3 ERROR 9002 (HY000) : TiKV Server Timeout</h4>
<p>请求 TiKV 超时，请检查 TiKV Server 状态/监控/日志以及 TiDB Server 与 TiKV Server 之间的网络。</p>
<h4 id="914-error-9003-hy000--tikv-server-is-busy">9.1.4 ERROR 9003 (HY000) : TiKV Server is Busy</h4>
<p>TiKV 操作繁忙，一般出现在数据库负载比较高时，请检查 TiKV Server 状态/监控/日志。</p>
<h4 id="915-error-9004-hy000--resolve-lock-timeout">9.1.5 ERROR 9004 (HY000) : Resolve Lock Timeout</h4>
<p>清理锁超时，当数据库上承载的业务存在大量的事务冲突时，会遇到这种错误，请检查业务代码是否有锁争用。</p>
<h4 id="916-error-9005-hy000--region-is-unavailable">9.1.6 ERROR 9005 (HY000) : Region is unavailable</h4>
<p>访问的 Region 不可用，某个 Raft Group 不可用，如副本数目不足，出现在 TiKV 比较繁忙或者是 TiKV 节点停机的时候，请检查 TiKV Server 状态/监控/日志。</p>
<h4 id="917-error-9006-hy000--gc-life-time-is-shorter-than-transaction-duration">9.1.7 ERROR 9006 (HY000) : GC life time is shorter than transaction duration</h4>
<p><code>GC Life Time</code> 间隔时间过短，长事务本应读到的数据可能被清理了，可使用如下命令增加 <code>GC Life Time</code>：</p>
<div class="copyable-code-block sql">
</div>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#66d9ef">update</span> mysql.tidb <span style="color:#66d9ef">set</span> variable_value<span style="color:#f92672">=</span><span style="color:#e6db74">'</span><span style="color:#e6db74">30m</span><span style="color:#e6db74">'</span> <span style="color:#66d9ef">where</span> variable_name<span style="color:#f92672">=</span><span style="color:#e6db74">'</span><span style="color:#e6db74">tikv_gc_life_time</span><span style="color:#e6db74">'</span>;
</code></pre></div><p>其中 30m 代表仅清理 30 分钟前的数据，这可能会额外占用一定的存储空间。</p>
<h4 id="918-error-9007-hy000--write-conflict">9.1.8 ERROR 9007 (HY000) : Write Conflict</h4>
<p>可以检查 <code>tidb_disable_txn_auto_retry</code> 是否为 on。如是，将其设置为 off；如已经是 off，将 <code>tidb_retry_limit</code> 调大到不再发生该错误。</p>
<h3 id="92-mysql-">9.2 MySQL 原生报错汇总</h3>
<h4 id="921-error-2013-hy000-lost-connection-to-mysql-server-during-query-">9.2.1 ERROR 2013 (HY000): Lost connection to MySQL server during query 问题的排查方法？</h4>
<ul>
<li>log 中是否有 panic</li>
<li>dmesg 中是否有 oom，命令：<code>dmesg -T | grep -i oom</code></li>
<li>长时间没有访问，也会收到这个报错，一般是 tcp 超时导致的，tcp 长时间不用, 会被操作系统 kill。</li>
</ul>
<h4 id="922-error-1105-hy000-other-error-unknown-error-wire-errorinvalidenumvalue4004-">9.2.2 ERROR 1105 (HY000): other error: unknown error Wire Error(InvalidEnumValue(4004)) 是什么意思？</h4>
<p>这类问题一般是 TiDB 和 TiKV 版本不匹配，在升级过程尽量一起升级，避免版本 mismatch。</p>
<h4 id="923-error-1148-42000-the-used-command-is-not-allowed-with-this-tidb-version-">9.2.3 ERROR 1148 (42000): the used command is not allowed with this TiDB version 问题的处理方法？</h4>
<p>这个问题是因为在执行 <code>LOAD DATA LOCAL</code> 语句的时候，MySQL 客户端不允许执行此语句（即 <code>local_infile</code> 选项为 0）。解决方法是在启动 MySQL 客户端时，用 <code>--local-infile=1</code> 选项。具体启动指令类似：<code>mysql --local-infile=1 -u root -h 127.0.0.1 -P 4000</code>。有些 MySQL 客户端需要设置而有些不需要设置，原因是不同版本的 MySQL 客户端对 <code>local-infile</code> 的默认值不同。</p>
<h4 id="924-error-9001-hy000-pd-server-timeout-start-timestamp-may-fall-behind-safe-point">9.2.4 ERROR 9001 (HY000): PD server timeout start timestamp may fall behind safe point</h4>
<p>这个报错一般是 TiDB 访问 PD 出了问题，TiDB 后台有个 worker 会不断地从 PD 查询 safepoint，如果超过 100s 查不成功就会报这个错。一般是因为 PD 磁盘操作过忙、反应过慢，或者 TiDB 和 PD 之间的网络有问题。TiDB 常见错误码请参考<a href="/docs-cn/dev/reference/error-codes">错误码与故障诊断</a>。</p>
<h3 id="93-tidb-">9.3 TiDB 日志中的报错信息</h3>
<h4 id="931-eof">9.3.1 EOF</h4>
<p>当客户端或者 proxy 断开连接时，TiDB 不会立刻察觉连接已断开，而是等到开始往连接返回数据时，才发现连接已断开，此时日志会打印 EOF 错误。</p>
</div>
<div class="article-toc"></div>
<div class="git-info">
<a class="link" href="https://github.com/pingcap/docs-cn/blob/master/faq/tidb.md">"TiDB FAQ"</a>
                更新于
                <span>Mar 6 2020</span>:
                <a class="link" href="https://github.com/pingcap/docs-cn/commit/6d4892a8bef2027cbf72a32a52152c358dd3141e">
                    faq: fix sysbench links (#2387) <span class="hash">(6d4892a)</span>
</a>
</div></div>
<div class="sidebar-page sticky-sidebar">
<a class="improve-doc" href="https://github.com/pingcap/docs-cn/edit/master/faq/tidb.md" target="_blank">
<svg fill="#142848" height="14" viewbox="0 0 275.836 275.836" width="14" xmlns="http://www.w3.org/2000/svg"><path d="M191.344 20.922l-95.155 95.155a5.99 5.99 0 0 0-1.565 2.734l-8.167 31.454a6.003 6.003 0 0 0 7.315 7.316l31.454-8.168a6.003 6.003 0 0 0 2.734-1.565l95.153-95.153.005-.004.004-.005 19.156-19.156a5.998 5.998 0 0 0 .001-8.484L218.994 1.758a5.998 5.998 0 0 0-8.485 0l-19.155 19.155-.005.004-.005.005zm-70.713 117.286l-19.993 5.192 5.191-19.993 89.762-89.762 14.801 14.802-89.761 89.761zm94.12-123.723l14.801 14.802-10.675 10.675-14.801-14.802 10.675-10.675z"></path><path d="M238.037 65.022a6 6 0 0 0-6 6v192.813H43.799V34.417h111.063a6 6 0 0 0 0-12H37.799a6 6 0 0 0-6 6v241.419a6 6 0 0 0 6 6h200.238a6 6 0 0 0 6-6V71.022a6 6 0 0 0-6-6z"></path></svg>
    修改本文
</a>
<a class="request-docs-changes" href="https://github.com/pingcap/docs-cn/issues/new?body=File:%20[dev%2ffaq%2ftidb.md](https%3a%2f%2fpingcap.com%2fdocs-cn%2fdev%2ffaq%2ftidb%2f)" target="_blank">
<svg height="14px" version="1.1" viewbox="0 0 192 192" width="14px" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g fill="none" fill-rule="nonzero" font-family="none" font-size="none" font-weight="none" stroke="none" stroke-dasharray="" stroke-dashoffset="0" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-width="1" style="mix-blend-mode: normal" text-anchor="none"><path d="M0,192v-192h192v192z" fill="none"></path><g fill="#142848"><path d="M162.34375,42.34375l-90.34375,90.34375l-34.34375,-34.34375l-11.3125,11.3125l45.65625,45.65625l101.65625,-101.65625z"></path></g></g></svg>

    反馈文档问题
</a><p class="toc-title">本页导航</p>
<div id="smart_toc_wrapper"></div>
</div>
</div>
</div>
<footer>
<div class="container">
<div class="flex-list-wrap">
<div class="flex-list">
<h4 class="list-title"><strong>产品</strong></h4>
<ul>
<li><a href="/docs-cn/v3.0/" onclick="trackViews('footer-product-tidb', 'docs-cn_view')">TiDB</a></li>
<li><a href="/docs-cn/v3.0/reference/tispark/">TiSpark</a></li>
<li><a href="/docs-cn/v3.0/roadmap/">TiDB 路线图</a></li>
</ul>
</div>
<div class="flex-list">
<h4 class="list-title"><strong>文档</strong></h4>
<ul>
<li><a href="/docs-cn/stable/how-to/get-started/deploy-tidb-from-docker-compose/">快速入门</a></li>
<li><a href="/blog-cn/tidb-best-practice/">最佳实践</a></li>
<li><a href="/docs-cn/stable/faq/tidb/">常见问题解答</a></li>
<li><a href="/docs-cn/stable/reference/tools/user-guide/">TiDB 周边工具</a></li>
<li><a href="/docs-cn/dev/releases/rn/">版本发布说明</a></li>
</ul>
</div>
<div class="flex-list">
<h4 class="list-title"><strong>资源</strong></h4>
<ul>
<li><a href="/blog-cn/">博客</a></li>
<li><a href="https://github.com/pingcap" target="_blank">GitHub</a></li>
<li><a href="https://zhuanlan.zhihu.com/newsql" target="_blank">知乎专栏</a></li>
<li><a href="https://university.pingcap.com/" onclick="trackViews('footer-source-university', 'pingcap-university_view')" target="_blank">PingCAP
                    University</a></li>
<li><a href="/solutions/intel/" onclick="trackViews('footer-resource-solutions', 'solutions_view')">联合解决方案</a></li>
<li><a href="https://asktug.com/" onclick="trackViews('footer-resource-asktug', 'asktug_view')" target="_blank">Ask TUG</a></li>
</ul>
</div>
<div class="flex-list">
<h4 class="list-title"><strong>公司</strong></h4>
<ul>
<li><a href="/about-cn/">关于我们</a></li>
<li><a href="/about-cn/recruit/join/" onclick="trackViews('footer-recruit-join', 'recruit-join_view')">招贤纳士</a>
</li>
<li><a href="/about-cn/news/">新闻报道</a></li>
</ul>
</div>
</div>
<div class="contact-list-wrap">
<div class="flex-list">
<h4 class="list-title"><strong>联系我们</strong></h4>
<ul>
<li><a class="twitter" href="https://twitter.com/PingCAP" target="_blank"><svg height="19" viewbox="0 0 612 612" width="18" xmlns="http://www.w3.org/2000/svg"><path d="M612 116.258a250.714 250.714 0 0 1-72.088 19.772c25.929-15.527 45.777-40.155 55.184-69.411-24.322 14.379-51.169 24.82-79.775 30.48-22.907-24.437-55.49-39.658-91.63-39.658-69.334 0-125.551 56.217-125.551 125.513 0 9.828 1.109 19.427 3.251 28.606-104.326-5.24-196.835-55.223-258.75-131.174-10.823 18.51-16.98 40.078-16.98 63.101 0 43.559 22.181 81.993 55.835 104.479a125.556 125.556 0 0 1-56.867-15.756v1.568c0 60.806 43.291 111.554 100.693 123.104-10.517 2.83-21.607 4.398-33.08 4.398-8.107 0-15.947-.803-23.634-2.333 15.985 49.907 62.336 86.199 117.253 87.194-42.947 33.654-97.099 53.655-155.916 53.655-10.134 0-20.116-.612-29.944-1.721 55.567 35.681 121.536 56.485 192.438 56.485 230.948 0 357.188-191.291 357.188-357.188l-.421-16.253c24.666-17.593 46.005-39.697 62.794-64.861z"></path></svg> Twitter</a></li>
<li><a class="linkedin" href="https://www.linkedin.com/company/pingcap/" target="_blank"><svg height="16" viewbox="0 0 438.536 438.535" width="18" xmlns="http://www.w3.org/2000/svg"><path d="M5.424 145.895H99.64v282.932H5.424zM408.842 171.739c-19.791-21.604-45.967-32.408-78.512-32.408-11.991 0-22.891 1.475-32.695 4.427-9.801 2.95-18.079 7.089-24.838 12.419-6.755 5.33-12.135 10.278-16.129 14.844-3.798 4.337-7.512 9.389-11.136 15.104v-40.232h-93.935l.288 13.706c.193 9.139.288 37.307.288 84.508 0 47.205-.19 108.777-.572 184.722h93.931V270.942c0-9.705 1.041-17.412 3.139-23.127 4-9.712 10.037-17.843 18.131-24.407 8.093-6.572 18.13-9.855 30.125-9.855 16.364 0 28.407 5.662 36.117 16.987 7.707 11.324 11.561 26.98 11.561 46.966V428.82h93.931V266.664c-.007-41.688-9.897-73.328-29.694-94.925zM53.103 9.708c-15.796 0-28.595 4.619-38.4 13.848C4.899 32.787 0 44.441 0 58.529 0 72.42 4.758 84.034 14.275 93.358c9.514 9.325 22.078 13.99 37.685 13.99h.571c15.99 0 28.887-4.661 38.688-13.99 9.801-9.324 14.606-20.934 14.417-34.829-.19-14.087-5.047-25.742-14.561-34.973C81.562 14.323 68.9 9.708 53.103 9.708z"></path></svg> LinkedIn</a></li>
<li><a class="reddit" href="https://www.reddit.com/r/TiDB/" target="_blank"><svg height="18" viewbox="0 0 279.748 279.748" width="18" xmlns="http://www.w3.org/2000/svg"><path d="M279.748 133.142c0-19.299-15.701-35-35-35-10.768 0-20.674 4.812-27.279 13.064-18.532-8.431-39.663-13.626-62.015-15.271l19.206-60.692 42.895 9.294c3.285 12.782 14.901 22.258 28.693 22.258 16.336 0 29.627-13.29 29.627-29.626 0-16.336-13.291-29.627-29.627-29.627-11.801 0-21.999 6.941-26.759 16.95l-49.497-10.725a10.002 10.002 0 0 0-11.651 6.756L134.636 95.43c-26.164.638-50.988 6.053-72.356 15.775-6.606-8.251-16.512-13.063-27.28-13.063-19.299 0-35 15.701-35 35 0 9.373 3.683 18.173 10.222 24.709-3.9 8.37-5.875 17.076-5.875 25.936 0 24.048 14.396 46.492 40.538 63.199 25.447 16.264 59.183 25.221 94.989 25.221 35.808 0 69.542-8.957 94.989-25.221 26.142-16.707 40.538-39.151 40.538-63.199 0-8.859-1.975-17.565-5.875-25.936 6.539-6.537 10.222-15.336 10.222-24.709zM15.369 145.139c-2.212-3.59-3.369-7.688-3.369-11.997 0-12.682 10.317-23 23-23 5.444 0 10.558 1.851 14.649 5.258-14.622 8.302-26.132 18.289-34.28 29.739zm52.671 20.266c0-13.785 11.215-25 25-25s25 11.215 25 25-11.215 25-25 25-25-11.215-25-25zm123.119 57.054c-9.745 10.637-29.396 17.244-51.285 17.244-21.888 0-41.539-6.607-51.284-17.244a9.937 9.937 0 0 1-2.617-7.192 9.933 9.933 0 0 1 3.235-6.937 9.974 9.974 0 0 1 6.754-2.627c2.797 0 5.484 1.183 7.373 3.244 5.803 6.333 20.827 10.756 36.539 10.756s30.737-4.423 36.539-10.756a10.022 10.022 0 0 1 7.374-3.244c2.508 0 4.906.933 6.755 2.627a9.928 9.928 0 0 1 3.234 6.937 9.933 9.933 0 0 1-2.617 7.192zm-4.451-32.054c-13.785 0-25-11.215-25-25s11.215-25 25-25 25 11.215 25 25-11.215 25-25 25zm77.671-45.266c-8.147-11.45-19.657-21.436-34.28-29.739 4.092-3.408 9.205-5.258 14.649-5.258 12.683 0 23 10.318 23 23 0 4.309-1.157 8.407-3.369 11.997z"></path></svg> Reddit</a></li>
<li><a class="google-plus" href="https://groups.google.com/forum/#!forum/tidb-user" target="_blank"><svg height="20" viewbox="0 0 491.858 491.858" width="18" xmlns="http://www.w3.org/2000/svg"><path d="M377.472 224.957H201.319v58.718H308.79c-16.032 51.048-63.714 88.077-120.055 88.077-69.492 0-125.823-56.335-125.823-125.824 0-69.492 56.333-125.823 125.823-125.823 34.994 0 66.645 14.289 89.452 37.346l42.622-46.328c-34.04-33.355-80.65-53.929-132.074-53.929C84.5 57.193 0 141.693 0 245.928s84.5 188.737 188.736 188.737c91.307 0 171.248-64.844 188.737-150.989v-58.718l-.001-.001zM491.858 224.857h-36.031v-36.031h-30.886v36.031H388.91v30.883h36.031v36.032h30.886V255.74h36.031z"></path></svg> Google Group</a></li>
<li><a class="stack-overflow" href="https://stackoverflow.com/questions/tagged/tidb" target="_blank"><svg height="17" viewbox="0 0 547.597 547.597" width="18" xmlns="http://www.w3.org/2000/svg"><path d="M140.81 475.111h.024l189.91-.269c8.434-.013 15.3-6.886 15.3-15.318v-21.298c0-8.428-6.854-15.288-15.3-15.288l-189.91.264c-8.433.012-15.3 6.885-15.3 15.318v21.31c.001 8.427 6.855 15.281 15.276 15.281z"></path><path d="M58.667 517.854c.073 29.26.073 29.449 3.072 29.449h.055l10.612.294h.086s85.814 0 171.629-.036c42.914-.019 85.821-.05 118-.092 16.09-.019 29.505-.043 38.887-.074 17.803-.055 17.803-.055 17.803-3.072l.3-10.697V333.299c0-8.434-6.866-15.3-15.3-15.3h-11.909c-8.434 0-15.3 6.866-15.3 15.3V496.22c0 5.062-4.119 9.18-9.181 9.18H110.51c-5.061 0-9.18-4.118-9.18-9.18V333.299c0-8.434-6.867-15.3-15.3-15.3H73.82c-8.433 0-15.3 6.86-15.3 15.3 0 23.342.012 76.084.055 122.981.019 23.447.05 45.442.092 61.574z"></path><path d="M142.322 397.399l189.402 17.467c.478.043.948.062 1.413.062 7.956 0 14.468-5.985 15.159-13.917l1.83-21.096c.729-8.396-5.508-15.851-13.898-16.628l-189.102-17.461c-8.593-.795-15.869 5.441-16.653 13.825l-1.97 21.108a15.172 15.172 0 0 0 3.452 11.181 15.19 15.19 0 0 0 10.367 5.459zM437.636 208.849a15.253 15.253 0 0 0 17.694 12.443l21.065-3.678c8.311-1.451 13.898-9.395 12.454-17.706l-32.504-187.23c-1.42-8.207-9.21-13.917-17.692-12.448l-21.065 3.678c-8.311 1.451-13.898 9.395-12.454 17.705l32.502 187.236zM190.333 194.375l163.6 96.708a15.28 15.28 0 0 0 7.778 2.136c5.393 0 10.447-2.876 13.183-7.509l10.876-18.36c2.08-3.519 2.674-7.631 1.658-11.591a15.18 15.18 0 0 0-7.032-9.358l-163.6-96.714c-7.014-4.149-16.836-1.597-20.967 5.374l-10.869 18.36a15.2 15.2 0 0 0-1.658 11.591 15.21 15.21 0 0 0 7.031 9.363zM387.525 240.501a15.276 15.276 0 0 0 12.626 6.659c3.091 0 6.077-.924 8.635-2.681l17.405-11.934c6.953-4.768 8.752-14.314 4.015-21.292L323.29 54.104c-4.584-6.732-14.498-8.623-21.236-3.984l-17.737 12.21c-6.945 4.779-8.727 14.327-3.971 21.291l107.179 156.88zM154.482 302.319l183.465 49.156c1.298.349 2.632.526 3.966.526 6.903 0 12.98-4.67 14.762-11.347l5.508-20.624c2.179-8.152-2.681-16.555-10.826-18.74l-183.465-49.162c-8.017-2.148-16.604 2.852-18.728 10.826l-5.508 20.63c-2.179 8.142 2.68 16.551 10.826 18.735z"></path></svg> Stack Overflow</a></li>
<li id="wechat"><a class="wechat" href="javascript:void(0)"><svg height="17" viewbox="0 0 31.403 31.404" width="18" xmlns="http://www.w3.org/2000/svg"><path d="M31.403 21.306c0-4.597-4.388-8.32-9.8-8.32-5.414 0-9.802 3.725-9.802 8.32 0 4.597 4.388 8.322 9.802 8.322 1.701 0 3.302-.369 4.697-1.019l3.863 1.671-.447-4.309c1.066-1.329 1.687-2.937 1.687-4.665zm-13.102-2.254a1.395 1.395 0 1 1 0-2.79 1.395 1.395 0 0 1 0 2.79zm6.604 0a1.395 1.395 0 1 1 .003-2.79 1.395 1.395 0 0 1-.003 2.79z"></path><path d="M21.604 11.885c1.515 0 2.957.27 4.271.755.009-.175.03-.345.03-.521 0-6.074-5.801-10.996-12.953-10.996C5.799 1.123 0 6.044 0 12.119c0 2.284.822 4.408 2.229 6.167l-.591 5.694 5.104-2.213c1.264.59 2.661.986 4.136 1.189a8.143 8.143 0 0 1-.179-1.65c.001-5.195 4.892-9.421 10.905-9.421zm-4.287-6.428a1.84 1.84 0 1 1-1.841 1.84c0-1.016.825-1.84 1.841-1.84zM8.586 9.139a1.84 1.84 0 0 1 0-3.682 1.84 1.84 0 1 1 0 3.682z"></path></svg> 微信公众号</a> <div class="qr_code_outer f-hide f-tc">
<div class="qr_code">
<i id="close_qrcode"><svg viewbox="0 0 224.512 224.512" xmlns="http://www.w3.org/2000/svg"><path d="M224.507 6.997L217.521 0 112.256 105.258 6.998 0 .005 6.997l105.258 105.257L.005 217.512l6.993 7L112.256 119.24l105.265 105.272 6.986-7-105.258-105.258z" fill="#010002"></path></svg></i>
<img alt="Wechat qrCode" class="qr_code_img" id="js_qr_code_img" src="/images/wechat-qrcode.jpg"/>
<p>微信扫一扫<br/> 微信ID：pingcap2015</p>
</div>
</div>
</li>
</ul>
</div>
<div class="subscribe" id="subscribe-pc"></div>
</div>
</div>
<div class="container copyright-container">
<p class="copyright">© 2020 北京平凯星辰科技发展有限公司</p>
<a class="copyright-btn-lang copyright-btn-en" href="/docs/dev" id="lang">English</a>
<a class="prepared-num" href="http://www.beian.miit.gov.cn/">京 ICP 备 16046278 号 - 2</a>
</div>
</footer>
<button class="back-to-top" type="button"><svg height="512" viewbox="0 0 284.929 284.929" width="512" xmlns="http://www.w3.org/2000/svg"><path d="M282.082 195.285L149.028 62.24c-1.901-1.903-4.088-2.856-6.562-2.856s-4.665.953-6.567 2.856L2.856 195.285C.95 197.191 0 199.378 0 201.853c0 2.474.953 4.664 2.856 6.566l14.272 14.271c1.903 1.903 4.093 2.854 6.567 2.854s4.664-.951 6.567-2.854l112.204-112.202 112.208 112.209c1.902 1.903 4.093 2.848 6.563 2.848 2.478 0 4.668-.951 6.57-2.848l14.274-14.277c1.902-1.902 2.847-4.093 2.847-6.566.001-2.476-.944-4.666-2.846-6.569z" fill="#FFF"></path></svg>
</button>
</div>
<div class="overlay"></div>
<script src="https://download.pingcap.com/js/jquery.min.js"></script><script src="/js/vendor/lazyload.min.js" type="text/javascript"></script>
<script src="/js/doc.js" type="text/javascript"></script>
<script src="/js/anchor.js" type="text/javascript"></script><script src="https://cdn.jsdelivr.net/algoliasearch/3/algoliasearch.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<script crossorigin="anonymous" integrity="sha384-jbFinqIbKkHNg+QL+yxB4VrBC0EAPTuaLGeRT0T+NfEV89YC6u1bKxHLwoo+/xxY" src="https://browser.sentry-cdn.com/5.11.0/bundle.min.js"></script>
<script type="text/javascript">Sentry.init({dsn:"https://3f28ed393c5545daa74496b3cdb2e9ba@sentry.io/1887163"})</script>
<script src="/js/app.js" type="text/javascript"></script></body>
</html>
